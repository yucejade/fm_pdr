<html><!-- Created using the cpp_pretty_printer from the dlib C++ library.  See http://dlib.net for updates. --><head><title>dlib C++ Library - pytypes.h</title></head><body bgcolor='white'><pre>
<font color='#009900'>/*
    pybind11/pytypes.h: Convenience wrapper classes for basic Python types

    Copyright (c) 2016 Wenzel Jakob &lt;wenzel.jakob@epfl.ch&gt;

    All rights reserved. Use of this source code is governed by a
    BSD-style license that can be found in the LICENSE file.
*/</font>

<font color='#0000FF'>#pragma</font> once

<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='detail/common.h.html'>detail/common.h</a>"
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='buffer_info.h.html'>buffer_info.h</a>"

<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>assert.h<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>cstddef<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>exception<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>frameobject.h<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>iterator<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>memory<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>string<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>type_traits<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>typeinfo<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#include</font> <font color='#5555FF'>&lt;</font>utility<font color='#5555FF'>&gt;</font>

<font color='#0000FF'>#if</font> defined<font face='Lucida Console'>(</font>PYBIND11_HAS_OPTIONAL<font face='Lucida Console'>)</font>
#    include <font color='#5555FF'>&lt;</font>optional<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#endif</font>

<font color='#0000FF'>#ifdef</font> PYBIND11_HAS_STRING_VIEW
#    include <font color='#5555FF'>&lt;</font>string_view<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>#endif</font>

<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>PYBIND11_NAMESPACE<font face='Lucida Console'>)</font>

<b><a name='PYBIND11_WARNING_DISABLE_MSVC'></a>PYBIND11_WARNING_DISABLE_MSVC</b><font face='Lucida Console'>(</font><font color='#979000'>4127</font><font face='Lucida Console'>)</font>

<font color='#009900'>/* A few forward declarations */</font>
<font color='#0000FF'>class</font> <b><a name='handle'></a>handle</b>;
<font color='#0000FF'>class</font> <b><a name='object'></a>object</b>;
<font color='#0000FF'>class</font> <b><a name='str'></a>str</b>;
<font color='#0000FF'>class</font> <b><a name='iterator'></a>iterator</b>;
<font color='#0000FF'>class</font> <b><a name='type'></a>type</b>;
<font color='#0000FF'>struct</font> <b><a name='arg'></a>arg</b>;
<font color='#0000FF'>struct</font> <b><a name='arg_v'></a>arg_v</b>;

<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>
<font color='#0000FF'>class</font> <b><a name='args_proxy'></a>args_proxy</b>;
<font color='#0000FF'><u>bool</u></font> <b><a name='isinstance_generic'></a>isinstance_generic</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> std::type_info <font color='#5555FF'>&amp;</font>tp<font face='Lucida Console'>)</font>;

<font color='#009900'>// Accessor forward declarations
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> Policy<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>class</font> <b><a name='accessor'></a>accessor</b>;
<font color='#0000FF'>namespace</font> accessor_policies <b>{</b>
<font color='#0000FF'>struct</font> <b><a name='obj_attr'></a>obj_attr</b>;
<font color='#0000FF'>struct</font> <b><a name='str_attr'></a>str_attr</b>;
<font color='#0000FF'>struct</font> <b><a name='generic_item'></a>generic_item</b>;
<font color='#0000FF'>struct</font> <b><a name='sequence_item'></a>sequence_item</b>;
<font color='#0000FF'>struct</font> <b><a name='list_item'></a>list_item</b>;
<font color='#0000FF'>struct</font> <b><a name='tuple_item'></a>tuple_item</b>;
<b>}</b> <font color='#009900'>// namespace accessor_policies
</font><font color='#009900'>// PLEASE KEEP handle_type_name SPECIALIZATIONS IN SYNC.
</font><font color='#0000FF'>using</font> obj_attr_accessor <font color='#5555FF'>=</font> accessor<font color='#5555FF'>&lt;</font>accessor_policies::obj_attr<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> str_attr_accessor <font color='#5555FF'>=</font> accessor<font color='#5555FF'>&lt;</font>accessor_policies::str_attr<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> item_accessor <font color='#5555FF'>=</font> accessor<font color='#5555FF'>&lt;</font>accessor_policies::generic_item<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> sequence_accessor <font color='#5555FF'>=</font> accessor<font color='#5555FF'>&lt;</font>accessor_policies::sequence_item<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> list_accessor <font color='#5555FF'>=</font> accessor<font color='#5555FF'>&lt;</font>accessor_policies::list_item<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> tuple_accessor <font color='#5555FF'>=</font> accessor<font color='#5555FF'>&lt;</font>accessor_policies::tuple_item<font color='#5555FF'>&gt;</font>;

<font color='#009900'>/// Tag and check to identify a class which implements the Python object API
</font><font color='#0000FF'>class</font> <b><a name='pyobject_tag'></a>pyobject_tag</b> <b>{</b><b>}</b>;
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>using</font> is_pyobject <font color='#5555FF'>=</font> std::is_base_of<font color='#5555FF'>&lt;</font>pyobject_tag, remove_reference_t<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font>;

<font color='#009900'>/** \rst
    A mixin class which adds common functions to `handle`, `object` and various accessors.
    The only requirement for `Derived` is to implement ``PyObject *Derived::ptr() const``.
\endrst */</font>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> Derived<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>class</font> <b><a name='object_api'></a>object_api</b> : <font color='#0000FF'>public</font> pyobject_tag <b>{</b>
    <font color='#0000FF'>const</font> Derived <font color='#5555FF'>&amp;</font><b><a name='derived'></a>derived</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'>const</font> Derived <font color='#5555FF'>&amp;</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#5555FF'>*</font><font color='#0000FF'>this</font><font face='Lucida Console'>)</font>; <b>}</b>

<font color='#0000FF'>public</font>:
    <font color='#009900'>/** \rst
        Return an iterator equivalent to calling ``iter()`` in Python. The object
        must be a collection which supports the iteration protocol.
    \endrst */</font>
    iterator <b><a name='begin'></a>begin</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    <font color='#009900'>/// Return a sentinel which ends iteration.
</font>    iterator <b><a name='end'></a>end</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/** \rst
        Return an internal functor to invoke the object's sequence protocol. Casting
        the returned ``detail::item_accessor`` instance to a `handle` or `object`
        subclass causes a corresponding call to ``__getitem__``. Assigning a `handle`
        or `object` subclass causes a call to ``__setitem__``.
    \endrst */</font>
    item_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>handle key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    <font color='#009900'>/// See above (the only difference is that the key's reference is stolen)
</font>    item_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    <font color='#009900'>/// See above (the only difference is that the key is provided as a string literal)
</font>    item_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/** \rst
        Return an internal functor to access the object's attributes. Casting the
        returned ``detail::obj_attr_accessor`` instance to a `handle` or `object`
        subclass causes a corresponding call to ``getattr``. Assigning a `handle`
        or `object` subclass causes a call to ``setattr``.
    \endrst */</font>
    obj_attr_accessor <b><a name='attr'></a>attr</b><font face='Lucida Console'>(</font>handle key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    <font color='#009900'>/// See above (the only difference is that the key's reference is stolen)
</font>    obj_attr_accessor <b><a name='attr'></a>attr</b><font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    <font color='#009900'>/// See above (the only difference is that the key is provided as a string literal)
</font>    str_attr_accessor <b><a name='attr'></a>attr</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/** \rst
        Matches * unpacking in Python, e.g. to unpack arguments out of a ``tuple``
        or ``list`` for a function call. Applying another * to the result yields
        ** unpacking, e.g. to unpack a dict as function keyword arguments.
        See :ref:`calling_python_functions`.
    \endrst */</font>
    args_proxy <b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/// Check if the given item is contained within this object, i.e. ``item in obj``.
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>bool</u></font> <b><a name='contains'></a>contains</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>item<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/** \rst
        Assuming the Python object is a function or implements the ``__call__``
        protocol, ``operator()`` invokes the underlying function, passing an
        arbitrary set of parameters. The result is returned as a `object` and
        may need to be converted back into a Python object using `handle::cast()`.

        When some of the arguments cannot be converted to Python objects, the
        function will throw a `cast_error` exception. When the Python function
        call fails, a `error_already_set` exception is thrown.
    \endrst */</font>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font>return_value_policy policy <font color='#5555FF'>=</font> return_value_policy::automatic_reference,
              <font color='#0000FF'>typename</font>... Args<font color='#5555FF'>&gt;</font>
    object <b><a name='operator'></a>operator</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>(</font>Args <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>...args<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font>return_value_policy policy <font color='#5555FF'>=</font> return_value_policy::automatic_reference,
              <font color='#0000FF'>typename</font>... Args<font color='#5555FF'>&gt;</font>
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>call(...) was deprecated in favor of operator()(...)</font>"<font face='Lucida Console'>)</font>
    object <b><a name='call'></a>call</b><font face='Lucida Console'>(</font>Args <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>...args<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/// Equivalent to ``obj is other`` in Python.
</font>    <font color='#0000FF'><u>bool</u></font> <b><a name='is'></a>is</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> other.<font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#009900'>/// Equivalent to ``obj is None`` in Python.
</font>    <font color='#0000FF'><u>bool</u></font> <b><a name='is_none'></a>is_none</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> Py_None; <b>}</b>
    <font color='#009900'>/// Equivalent to obj == other in Python
</font>    <font color='#0000FF'><u>bool</u></font> <b><a name='equal'></a>equal</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>rich_compare</font><font face='Lucida Console'>(</font>other, Py_EQ<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='not_equal'></a>not_equal</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>rich_compare</font><font face='Lucida Console'>(</font>other, Py_NE<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>rich_compare</font><font face='Lucida Console'>(</font>other, Py_LT<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>rich_compare</font><font face='Lucida Console'>(</font>other, Py_LE<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>rich_compare</font><font face='Lucida Console'>(</font>other, Py_GT<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>rich_compare</font><font face='Lucida Console'>(</font>other, Py_GE<font face='Lucida Console'>)</font>; <b>}</b>

    object <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b>~<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>/</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>/</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>|</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>|</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>&amp;</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>&amp;</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b>^<font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b>^<font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    object <b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font>;

    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use py::str(obj) instead</font>"<font face='Lucida Console'>)</font>
    pybind11::str <b><a name='str'></a>str</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/// Get or set the object's docstring, i.e. ``obj.__doc__``.
</font>    str_attr_accessor <b><a name='doc'></a>doc</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

    <font color='#009900'>/// Return the object's current reference count
</font>    <font color='#0000FF'><u>int</u></font> <b><a name='ref_count'></a>ref_count</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>Py_REFCNT</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#009900'>// TODO PYBIND11_DEPRECATED(
</font>    <font color='#009900'>//     "Call py::type::handle_of(h) or py::type::of(h) instead of h.get_type()")
</font>    handle <b><a name='get_type'></a>get_type</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;

<font color='#0000FF'>private</font>:
    <font color='#0000FF'><u>bool</u></font> <b><a name='rich_compare'></a>rich_compare</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other, <font color='#0000FF'><u>int</u></font> value<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
<b>}</b>;

<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>using</font> is_pyobj_ptr_or_nullptr_t <font color='#5555FF'>=</font> detail::any_of<font color='#5555FF'>&lt;</font>std::is_same<font color='#5555FF'>&lt;</font>T, PyObject <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font>,
                                                 std::is_same<font color='#5555FF'>&lt;</font>T, PyObject <font color='#5555FF'>*</font><font color='#0000FF'>const</font><font color='#5555FF'>&gt;</font>,
                                                 std::is_same<font color='#5555FF'>&lt;</font>T, std::nullptr_t<font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font>;

<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>

<font color='#0000FF'>#if</font> <font color='#5555FF'>!</font>defined<font face='Lucida Console'>(</font>PYBIND11_HANDLE_REF_DEBUG<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#5555FF'>!</font>defined<font face='Lucida Console'>(</font>NDEBUG<font face='Lucida Console'>)</font>
#    define PYBIND11_HANDLE_REF_DEBUG
<font color='#0000FF'>#endif</font>

<font color='#009900'>/** \rst
    Holds a reference to a Python object (no reference counting)

    The `handle` class is a thin wrapper around an arbitrary Python object (i.e. a
    ``PyObject *`` in Python's C API). It does not perform any automatic reference
    counting and merely provides a basic C++ interface to various Python API functions.

    .. seealso::
        The `object` class inherits from `handle` and adds automatic reference
        counting features.
\endrst */</font>
<font color='#0000FF'>class</font> <b><a name='handle'></a>handle</b> : <font color='#0000FF'>public</font> detail::object_api<font color='#5555FF'>&lt;</font>handle<font color='#5555FF'>&gt;</font> <b>{</b>
<font color='#0000FF'>public</font>:
    <font color='#009900'>/// The default constructor creates a handle with a ``nullptr``-valued pointer
</font>    <b><a name='handle'></a>handle</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;

    <font color='#009900'>/// Enable implicit conversion from ``PyObject *`` and ``nullptr``.
</font>    <font color='#009900'>/// Not using ``handle(PyObject *ptr)`` to avoid implicit conversion from ``0``.
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T,
              detail::enable_if_t<font color='#5555FF'>&lt;</font>detail::is_pyobj_ptr_or_nullptr_t<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='handle'></a>handle</b><font face='Lucida Console'>(</font>T ptr<font face='Lucida Console'>)</font> : m_ptr<font face='Lucida Console'>(</font>ptr<font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#009900'>/// Enable implicit conversion through ``T::operator PyObject *()``.
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font>
        <font color='#0000FF'>typename</font> T,
        detail::enable_if_t<font color='#5555FF'>&lt;</font>detail::all_of<font color='#5555FF'>&lt;</font>detail::none_of<font color='#5555FF'>&lt;</font>std::is_base_of<font color='#5555FF'>&lt;</font>handle, T<font color='#5555FF'>&gt;</font>,
                                                           detail::is_pyobj_ptr_or_nullptr_t<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font>,
                                           std::is_convertible<font color='#5555FF'>&lt;</font>T, PyObject <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font>::value,
                            <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font>
        <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='handle'></a>handle</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font>obj<font face='Lucida Console'>)</font> : m_ptr<font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#009900'>/// Return the underlying ``PyObject *`` pointer
</font>    PyObject <font color='#5555FF'>*</font><b><a name='ptr'></a>ptr</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_ptr; <b>}</b>
    PyObject <font color='#5555FF'>*</font><font color='#5555FF'>&amp;</font><b><a name='ptr'></a>ptr</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> m_ptr; <b>}</b>

    <font color='#009900'>/** \rst
        Manually increase the reference count of the Python object. Usually, it is
        preferable to use the `object` class which derives from `handle` and calls
        this function automatically. Returns a reference to itself.
    \endrst */</font>
    <font color='#0000FF'>const</font> handle <font color='#5555FF'>&amp;</font><b><a name='inc_ref'></a>inc_ref</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font> <b>{</b>
<font color='#0000FF'>#ifdef</font> PYBIND11_HANDLE_REF_DEBUG
        <font color='#BB00BB'>inc_ref_counter</font><font face='Lucida Console'>(</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
<font color='#0000FF'>#endif</font>
<font color='#0000FF'>#ifdef</font> PYBIND11_ASSERT_GIL_HELD_INCREF_DECREF
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_ptr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#5555FF'>!</font><font color='#BB00BB'>PyGILState_Check</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>throw_gilstate_error</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>pybind11::handle::inc_ref()</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
<font color='#0000FF'>#endif</font>
        <font color='#BB00BB'>Py_XINCREF</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>

    <font color='#009900'>/** \rst
        Manually decrease the reference count of the Python object. Usually, it is
        preferable to use the `object` class which derives from `handle` and calls
        this function automatically. Returns a reference to itself.
    \endrst */</font>
    <font color='#0000FF'>const</font> handle <font color='#5555FF'>&amp;</font><b><a name='dec_ref'></a>dec_ref</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font> <b>{</b>
<font color='#0000FF'>#ifdef</font> PYBIND11_ASSERT_GIL_HELD_INCREF_DECREF
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_ptr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#5555FF'>!</font><font color='#BB00BB'>PyGILState_Check</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>throw_gilstate_error</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>pybind11::handle::dec_ref()</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
<font color='#0000FF'>#endif</font>
        <font color='#BB00BB'>Py_XDECREF</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>

    <font color='#009900'>/** \rst
        Attempt to cast the Python object into the given C++ type. A `cast_error`
        will be throw upon failure.
    \endrst */</font>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    T <b><a name='cast'></a>cast</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font>;
    <font color='#009900'>/// Return ``true`` when the `handle` wraps a valid Python object
</font>    <font color='#0000FF'>explicit</font> <b><a name='operator'></a>operator</b> <font color='#0000FF'><u>bool</u></font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_ptr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr; <b>}</b>
    <font color='#009900'>/** \rst
        Deprecated: Check that the underlying pointers are the same.
        Equivalent to ``obj1 is obj2`` in Python.
    \endrst */</font>
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use obj1.is(obj2) instead</font>"<font face='Lucida Console'>)</font>
    <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> handle <font color='#5555FF'>&amp;</font>h<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_ptr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> h.m_ptr; <b>}</b>
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use !obj1.is(obj2) instead</font>"<font face='Lucida Console'>)</font>
    <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>!</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> handle <font color='#5555FF'>&amp;</font>h<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_ptr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> h.m_ptr; <b>}</b>
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use handle::operator bool() instead</font>"<font face='Lucida Console'>)</font>
    <font color='#0000FF'><u>bool</u></font> <b><a name='check'></a>check</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_ptr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr; <b>}</b>

<font color='#0000FF'>protected</font>:
    PyObject <font color='#5555FF'>*</font>m_ptr <font color='#5555FF'>=</font> nullptr;

<font color='#0000FF'>private</font>:
<font color='#0000FF'>#ifdef</font> PYBIND11_ASSERT_GIL_HELD_INCREF_DECREF
    <font color='#0000FF'><u>void</u></font> <b><a name='throw_gilstate_error'></a>throw_gilstate_error</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> std::string <font color='#5555FF'>&amp;</font>function_name<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#BB00BB'>fprintf</font><font face='Lucida Console'>(</font>
            stderr,
            "<font color='#CC0000'>%s is being called while the GIL is either not held or invalid. Please see </font>"
            "<font color='#CC0000'>https://pybind11.readthedocs.io/en/stable/advanced/</font>"
            "<font color='#CC0000'>misc.html#common-sources-of-global-interpreter-lock-errors for debugging advice.\n</font>"
            "<font color='#CC0000'>If you are convinced there is no bug in your code, you can #define </font>"
            "<font color='#CC0000'>PYBIND11_NO_ASSERT_GIL_HELD_INCREF_DECREF </font>"
            "<font color='#CC0000'>to disable this check. In that case you have to ensure this #define is consistently </font>"
            "<font color='#CC0000'>used for all translation units linked into a given pybind11 extension, otherwise </font>"
            "<font color='#CC0000'>there will be ODR violations.</font>",
            function_name.<font color='#BB00BB'>c_str</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>Py_TYPE</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>tp_name <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>fprintf</font><font face='Lucida Console'>(</font>stderr,
                    "<font color='#CC0000'> The failing %s call was triggered on a %s object.</font>",
                    function_name.<font color='#BB00BB'>c_str</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>,
                    <font color='#BB00BB'>Py_TYPE</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>tp_name<font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#BB00BB'>fprintf</font><font face='Lucida Console'>(</font>stderr, "<font color='#CC0000'>\n</font>"<font face='Lucida Console'>)</font>;
        <font color='#BB00BB'>fflush</font><font face='Lucida Console'>(</font>stderr<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>throw</font> std::<font color='#BB00BB'>runtime_error</font><font face='Lucida Console'>(</font>function_name <font color='#5555FF'>+</font> "<font color='#CC0000'> PyGILState_Check() failure.</font>"<font face='Lucida Console'>)</font>;
    <b>}</b>
<font color='#0000FF'>#endif</font>

<font color='#0000FF'>#ifdef</font> PYBIND11_HANDLE_REF_DEBUG
    <font color='#0000FF'>static</font> std::<font color='#0000FF'><u>size_t</u></font> <b><a name='inc_ref_counter'></a>inc_ref_counter</b><font face='Lucida Console'>(</font>std::<font color='#0000FF'><u>size_t</u></font> add<font face='Lucida Console'>)</font> <b>{</b>
        thread_local std::<font color='#0000FF'><u>size_t</u></font> counter <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
        counter <font color='#5555FF'>+</font><font color='#5555FF'>=</font> add;
        <font color='#0000FF'>return</font> counter;
    <b>}</b>

<font color='#0000FF'>public</font>:
    <font color='#0000FF'>static</font> std::<font color='#0000FF'><u>size_t</u></font> <b><a name='inc_ref_counter'></a>inc_ref_counter</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>inc_ref_counter</font><font face='Lucida Console'>(</font><font color='#979000'>0</font><font face='Lucida Console'>)</font>; <b>}</b>
<font color='#0000FF'>#endif</font>
<b>}</b>;

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='set_error'></a>set_error</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> handle <font color='#5555FF'>&amp;</font>type, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>message<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#BB00BB'>PyErr_SetString</font><font face='Lucida Console'>(</font>type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, message<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='set_error'></a>set_error</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> handle <font color='#5555FF'>&amp;</font>type, <font color='#0000FF'>const</font> handle <font color='#5555FF'>&amp;</font>value<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#BB00BB'>PyErr_SetObject</font><font face='Lucida Console'>(</font>type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#009900'>/** \rst
    Holds a reference to a Python object (with reference counting)

    Like `handle`, the `object` class is a thin wrapper around an arbitrary Python
    object (i.e. a ``PyObject *`` in Python's C API). In contrast to `handle`, it
    optionally increases the object's reference count upon construction, and it
    *always* decreases the reference count when the `object` instance goes out of
    scope and is destructed. When using `object` instances consistently, it is much
    easier to get reference counting right at the first attempt.
\endrst */</font>
<font color='#0000FF'>class</font> <b><a name='object'></a>object</b> : <font color='#0000FF'>public</font> handle <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='object'></a>object</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use reinterpret_borrow&lt;object&gt;() or reinterpret_steal&lt;object&gt;()</font>"<font face='Lucida Console'>)</font>
    <b><a name='object'></a>object</b><font face='Lucida Console'>(</font>handle h, <font color='#0000FF'><u>bool</u></font> is_borrowed<font face='Lucida Console'>)</font> : handle<font face='Lucida Console'>(</font>h<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>is_borrowed<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#009900'>/// Copy constructor; always increases the reference count
</font>    <b><a name='object'></a>object</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> object <font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> : handle<font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font> <b>{</b> <font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#009900'>/// Move constructor; steals the object from ``other`` and preserves its reference count
</font>    <b><a name='object'></a>object</b><font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> noexcept : <b><a name='handle'></a>handle</b><font face='Lucida Console'>(</font>other<font face='Lucida Console'>)</font> <b>{</b> other.m_ptr <font color='#5555FF'>=</font> nullptr; <b>}</b>
    <font color='#009900'>/// Destructor; automatically calls `handle::dec_ref()`
</font>    ~<b><a name='object'></a>object</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#BB00BB'>dec_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#009900'>/** \rst
        Resets the internal pointer to ``nullptr`` without decreasing the
        object's reference count. The function returns a raw handle to the original
        Python object.
    \endrst */</font>
    handle <b><a name='release'></a>release</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        PyObject <font color='#5555FF'>*</font>tmp <font color='#5555FF'>=</font> m_ptr;
        m_ptr <font color='#5555FF'>=</font> nullptr;
        <font color='#0000FF'>return</font> <font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font>tmp<font face='Lucida Console'>)</font>;
    <b>}</b>

    object <font color='#5555FF'>&amp;</font><b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> object <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#009900'>// Skip inc_ref and dec_ref if both objects are the same
</font>        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font><font color='#0000FF'>this</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>is</font><font face='Lucida Console'>(</font>other<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            other.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <font color='#009900'>// Use temporary variable to ensure `*this` remains valid while
</font>            <font color='#009900'>// `Py_XDECREF` executes, in case `*this` is accessible from Python.
</font>            handle <font color='#BB00BB'>temp</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
            m_ptr <font color='#5555FF'>=</font> other.m_ptr;
            temp.<font color='#BB00BB'>dec_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>

    object <font color='#5555FF'>&amp;</font><b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> noexcept <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#0000FF'>this</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <b>{</b>
            handle <font color='#BB00BB'>temp</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
            m_ptr <font color='#5555FF'>=</font> other.m_ptr;
            other.m_ptr <font color='#5555FF'>=</font> nullptr;
            temp.<font color='#BB00BB'>dec_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>

<font color='#0000FF'>#define</font> PYBIND11_INPLACE_OP<font face='Lucida Console'>(</font>iop<font face='Lucida Console'>)</font>                                                                  \
    object <b><a name='iop'></a>iop</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#0000FF'>operator</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>handle::<font color='#BB00BB'>iop</font><font face='Lucida Console'>(</font>other<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>

    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>/</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>|</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&amp;</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b>^<font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_INPLACE_OP'></a>PYBIND11_INPLACE_OP</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#undef</font> PYBIND11_INPLACE_OP

    <font color='#009900'>// Calling cast() on an object lvalue just copies (via handle::cast)
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    T <b><a name='cast'></a>cast</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>;
    <font color='#009900'>// Calling on an object rvalue does a move, if needed and/or possible
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    T <b><a name='cast'></a>cast</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>;

<font color='#0000FF'>protected</font>:
    <font color='#009900'>// Tags for choosing constructors from raw PyObject *
</font>    <font color='#0000FF'>struct</font> <b><a name='borrowed_t'></a>borrowed_t</b> <b>{</b><b>}</b>;
    <font color='#0000FF'>struct</font> <b><a name='stolen_t'></a>stolen_t</b> <b>{</b><b>}</b>;

    <font color='#009900'>/// @cond BROKEN
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>friend</font> T <b><a name='reinterpret_borrow'></a>reinterpret_borrow</b><font face='Lucida Console'>(</font>handle<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>friend</font> T <b><a name='reinterpret_steal'></a>reinterpret_steal</b><font face='Lucida Console'>(</font>handle<font face='Lucida Console'>)</font>;
    <font color='#009900'>/// @endcond
</font>
<font color='#0000FF'>public</font>:
    <font color='#009900'>// Only accessible from derived classes and the reinterpret_* functions
</font>    <b><a name='object'></a>object</b><font face='Lucida Console'>(</font>handle h, borrowed_t<font face='Lucida Console'>)</font> : handle<font face='Lucida Console'>(</font>h<font face='Lucida Console'>)</font> <b>{</b> <font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
    <b><a name='object'></a>object</b><font face='Lucida Console'>(</font>handle h, stolen_t<font face='Lucida Console'>)</font> : handle<font face='Lucida Console'>(</font>h<font face='Lucida Console'>)</font> <b>{</b><b>}</b>
<b>}</b>;

<font color='#009900'>/** \rst
    Declare that a `handle` or ``PyObject *`` is a certain type and borrow the reference.
    The target type ``T`` must be `object` or one of its derived classes. The function
    doesn't do any conversions or checks. It's up to the user to make sure that the
    target type is correct.

    .. code-block:: cpp

        PyObject *p = PyList_GetItem(obj, index);
        py::object o = reinterpret_borrow&lt;py::object&gt;(p);
        // or
        py::tuple t = reinterpret_borrow&lt;py::tuple&gt;(p); // &lt;-- `p` must be already be a `tuple`
\endrst */</font>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
T <b><a name='reinterpret_borrow'></a>reinterpret_borrow</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b>h, object::borrowed_t<b>{</b><b>}</b><b>}</b>;
<b>}</b>

<font color='#009900'>/** \rst
    Like `reinterpret_borrow`, but steals the reference.

     .. code-block:: cpp

        PyObject *p = PyObject_Str(obj);
        py::str s = reinterpret_steal&lt;py::str&gt;(p); // &lt;-- `p` must be already be a `str`
\endrst */</font>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
T <b><a name='reinterpret_steal'></a>reinterpret_steal</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b>h, object::stolen_t<b>{</b><b>}</b><b>}</b>;
<b>}</b>

<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>

<font color='#009900'>// Equivalent to obj.__class__.__name__ (or obj.__name__ if obj is a class).
</font><font color='#0000FF'>inline</font> <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><b><a name='obj_class_name'></a>obj_class_name</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>obj<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyType_Check</font><font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font>PyTypeObject <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>tp_name;
    <b>}</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>Py_TYPE</font><font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>tp_name;
<b>}</b>

std::string <b><a name='error_string'></a>error_string</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;

<font color='#009900'>// The code in this struct is very unusual, to minimize the chances of
</font><font color='#009900'>// masking bugs (elsewhere) by errors during the error handling (here).
</font><font color='#009900'>// This is meant to be a lifeline for troubleshooting long-running processes
</font><font color='#009900'>// that crash under conditions that are virtually impossible to reproduce.
</font><font color='#009900'>// Low-level implementation alternatives are preferred to higher-level ones
</font><font color='#009900'>// that might raise cascading exceptions. Last-ditch-kind-of attempts are made
</font><font color='#009900'>// to report as much of the original error as possible, even if there are
</font><font color='#009900'>// secondary issues obtaining some of the details.
</font><font color='#0000FF'>struct</font> <b><a name='error_fetch_and_normalize'></a>error_fetch_and_normalize</b> <b>{</b>
    <font color='#009900'>// This comment only applies to Python &lt;= 3.11:
</font>    <font color='#009900'>//     Immediate normalization is long-established behavior (starting with
</font>    <font color='#009900'>//     https://github.com/pybind/pybind11/commit/135ba8deafb8bf64a15b24d1513899eb600e2011
</font>    <font color='#009900'>//     from Sep 2016) and safest. Normalization could be deferred, but this could mask
</font>    <font color='#009900'>//     errors elsewhere, the performance gain is very minor in typical situations
</font>    <font color='#009900'>//     (usually the dominant bottleneck is EH unwinding), and the implementation here
</font>    <font color='#009900'>//     would be more complex.
</font>    <font color='#009900'>// Starting with Python 3.12, PyErr_Fetch() normalizes exceptions immediately.
</font>    <font color='#009900'>// Any errors during normalization are tracked under __notes__.
</font>    <font color='#0000FF'>explicit</font> <b><a name='error_fetch_and_normalize'></a>error_fetch_and_normalize</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>called<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>PyErr_Fetch</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>m_type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>m_value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>m_trace.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_type<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Internal error: </font>" <font color='#5555FF'>+</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>called<font face='Lucida Console'>)</font>
                          <font color='#5555FF'>+</font> "<font color='#CC0000'> called while </font>"
                            "<font color='#CC0000'>Python error indicator not set.</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>exc_type_name_orig <font color='#5555FF'>=</font> detail::<font color='#BB00BB'>obj_class_name</font><font face='Lucida Console'>(</font>m_type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>exc_type_name_orig <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Internal error: </font>" <font color='#5555FF'>+</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>called<font face='Lucida Console'>)</font>
                          <font color='#5555FF'>+</font> "<font color='#CC0000'> failed to obtain the name </font>"
                            "<font color='#CC0000'>of the original active exception type.</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
        m_lazy_error_string <font color='#5555FF'>=</font> exc_type_name_orig;
<font color='#0000FF'>#if</font> PY_VERSION_HEX <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0x030C0000</font>
        <font color='#009900'>// The presence of __notes__ is likely due to exception normalization
</font>        <font color='#009900'>// errors, although that is not necessarily true, therefore insert a
</font>        <font color='#009900'>// hint only:
</font>        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_HasAttrString</font><font face='Lucida Console'>(</font>m_value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, "<font color='#CC0000'>__notes__</font>"<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            m_lazy_error_string <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>[WITH __notes__]</font>";
        <b>}</b>
<font color='#0000FF'>#else</font>
        <font color='#009900'>// PyErr_NormalizeException() may change the exception type if there are cascading
</font>        <font color='#009900'>// failures. This can potentially be extremely confusing.
</font>        <font color='#BB00BB'>PyErr_NormalizeException</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>m_type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>m_value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>m_trace.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Internal error: </font>" <font color='#5555FF'>+</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>called<font face='Lucida Console'>)</font>
                          <font color='#5555FF'>+</font> "<font color='#CC0000'> failed to normalize the </font>"
                            "<font color='#CC0000'>active exception.</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>exc_type_name_norm <font color='#5555FF'>=</font> detail::<font color='#BB00BB'>obj_class_name</font><font face='Lucida Console'>(</font>m_type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>exc_type_name_norm <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Internal error: </font>" <font color='#5555FF'>+</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>called<font face='Lucida Console'>)</font>
                          <font color='#5555FF'>+</font> "<font color='#CC0000'> failed to obtain the name </font>"
                            "<font color='#CC0000'>of the normalized active exception type.</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
#    <font color='#0000FF'>if</font> <font color='#BB00BB'>defined</font><font face='Lucida Console'>(</font>PYPY_VERSION_NUM<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> PYPY_VERSION_NUM <font color='#5555FF'>&lt;</font> <font color='#979000'>0x07030a00</font>
        <font color='#009900'>// This behavior runs the risk of masking errors in the error handling, but avoids a
</font>        <font color='#009900'>// conflict with PyPy, which relies on the normalization here to change OSError to
</font>        <font color='#009900'>// FileNotFoundError (https://github.com/pybind/pybind11/issues/4075).
</font>        m_lazy_error_string <font color='#5555FF'>=</font> exc_type_name_norm;
#    <font color='#0000FF'>else</font>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>exc_type_name_norm <font color='#5555FF'>!</font><font color='#5555FF'>=</font> m_lazy_error_string<font face='Lucida Console'>)</font> <b>{</b>
            std::string msg <font color='#5555FF'>=</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>called<font face='Lucida Console'>)</font>
                              <font color='#5555FF'>+</font> "<font color='#CC0000'>: MISMATCH of original and normalized </font>"
                                "<font color='#CC0000'>active exception types: </font>";
            msg <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>ORIGINAL </font>";
            msg <font color='#5555FF'>+</font><font color='#5555FF'>=</font> m_lazy_error_string;
            msg <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'> REPLACED BY </font>";
            msg <font color='#5555FF'>+</font><font color='#5555FF'>=</font> exc_type_name_norm;
            msg <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>: </font>" <font color='#5555FF'>+</font> <font color='#BB00BB'>format_value_and_trace</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>msg<font face='Lucida Console'>)</font>;
        <b>}</b>
#    endif
<font color='#0000FF'>#endif</font>
    <b>}</b>

    <b><a name='error_fetch_and_normalize'></a>error_fetch_and_normalize</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> error_fetch_and_normalize <font color='#5555FF'>&amp;</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>delete</font>;
    <b><a name='error_fetch_and_normalize'></a>error_fetch_and_normalize</b><font face='Lucida Console'>(</font>error_fetch_and_normalize <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>delete</font>;

    std::string <b><a name='format_value_and_trace'></a>format_value_and_trace</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        std::string result;
        std::string message_error_string;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_value<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>auto</font> value_str <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_Str</font><font face='Lucida Console'>(</font>m_value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
            constexpr <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>message_unavailable_exc
                <font color='#5555FF'>=</font> "<font color='#CC0000'>&lt;MESSAGE UNAVAILABLE DUE TO ANOTHER EXCEPTION&gt;</font>";
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>value_str<font face='Lucida Console'>)</font> <b>{</b>
                message_error_string <font color='#5555FF'>=</font> detail::<font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                result <font color='#5555FF'>=</font> message_unavailable_exc;
            <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                <font color='#009900'>// Not using `value_str.cast&lt;std::string&gt;()`, to not potentially throw a secondary
</font>                <font color='#009900'>// error_already_set that will then result in process termination (#4288).
</font>                <font color='#0000FF'>auto</font> value_bytes <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>
                    <font color='#BB00BB'>PyUnicode_AsEncodedString</font><font face='Lucida Console'>(</font>value_str.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, "<font color='#CC0000'>utf-8</font>", "<font color='#CC0000'>backslashreplace</font>"<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
                <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>value_bytes<font face='Lucida Console'>)</font> <b>{</b>
                    message_error_string <font color='#5555FF'>=</font> detail::<font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                    result <font color='#5555FF'>=</font> message_unavailable_exc;
                <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                    <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>buffer <font color='#5555FF'>=</font> nullptr;
                    Py_ssize_t length <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
                    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyBytes_AsStringAndSize</font><font face='Lucida Console'>(</font>value_bytes.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>buffer, <font color='#5555FF'>&amp;</font>length<font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
                        message_error_string <font color='#5555FF'>=</font> detail::<font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                        result <font color='#5555FF'>=</font> message_unavailable_exc;
                    <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                        result <font color='#5555FF'>=</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>buffer, <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font>std::<font color='#0000FF'><u>size_t</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>length<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
                    <b>}</b>
                <b>}</b>
            <b>}</b>
<font color='#0000FF'>#if</font> PY_VERSION_HEX <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0x030B0000</font>
            <font color='#0000FF'>auto</font> notes
                <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_GetAttrString</font><font face='Lucida Console'>(</font>m_value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, "<font color='#CC0000'>__notes__</font>"<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>notes<font face='Lucida Console'>)</font> <b>{</b>
                <font color='#BB00BB'>PyErr_Clear</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <font color='#009900'>// No notes is good news.
</font>            <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                <font color='#0000FF'>auto</font> len_notes <font color='#5555FF'>=</font> <font color='#BB00BB'>PyList_Size</font><font face='Lucida Console'>(</font>notes.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
                <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>len_notes <font color='#5555FF'>&lt;</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
                    result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>\nFAILURE obtaining len(__notes__): </font>" <font color='#5555FF'>+</font> detail::<font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                    result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>\n__notes__ (len=</font>" <font color='#5555FF'>+</font> std::<font color='#BB00BB'>to_string</font><font face='Lucida Console'>(</font>len_notes<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> "<font color='#CC0000'>):</font>";
                    <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ssize_t i <font color='#5555FF'>=</font> <font color='#979000'>0</font>; i <font color='#5555FF'>&lt;</font> len_notes; i<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
                        PyObject <font color='#5555FF'>*</font>note <font color='#5555FF'>=</font> <font color='#BB00BB'>PyList_GET_ITEM</font><font face='Lucida Console'>(</font>notes.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, i<font face='Lucida Console'>)</font>;
                        <font color='#0000FF'>auto</font> note_bytes <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>
                            <font color='#BB00BB'>PyUnicode_AsEncodedString</font><font face='Lucida Console'>(</font>note, "<font color='#CC0000'>utf-8</font>", "<font color='#CC0000'>backslashreplace</font>"<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
                        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>note_bytes<font face='Lucida Console'>)</font> <b>{</b>
                            result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>\nFAILURE obtaining __notes__[</font>" <font color='#5555FF'>+</font> std::<font color='#BB00BB'>to_string</font><font face='Lucida Console'>(</font>i<font face='Lucida Console'>)</font>
                                      <font color='#5555FF'>+</font> "<font color='#CC0000'>]: </font>" <font color='#5555FF'>+</font> detail::<font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                        <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                            <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>buffer <font color='#5555FF'>=</font> nullptr;
                            Py_ssize_t length <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
                            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyBytes_AsStringAndSize</font><font face='Lucida Console'>(</font>note_bytes.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>buffer, <font color='#5555FF'>&amp;</font>length<font face='Lucida Console'>)</font>
                                <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
                                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>\nFAILURE formatting __notes__[</font>" <font color='#5555FF'>+</font> std::<font color='#BB00BB'>to_string</font><font face='Lucida Console'>(</font>i<font face='Lucida Console'>)</font>
                                          <font color='#5555FF'>+</font> "<font color='#CC0000'>]: </font>" <font color='#5555FF'>+</font> detail::<font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                            <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> '<font color='#FF0000'>\n</font>';
                                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>buffer, <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font>std::<font color='#0000FF'><u>size_t</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>length<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
                            <b>}</b>
                        <b>}</b>
                    <b>}</b>
                <b>}</b>
            <b>}</b>
<font color='#0000FF'>#endif</font>
        <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
            result <font color='#5555FF'>=</font> "<font color='#CC0000'>&lt;MESSAGE UNAVAILABLE&gt;</font>";
        <b>}</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>result.<font color='#BB00BB'>empty</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            result <font color='#5555FF'>=</font> "<font color='#CC0000'>&lt;EMPTY MESSAGE&gt;</font>";
        <b>}</b>

        <font color='#0000FF'><u>bool</u></font> have_trace <font color='#5555FF'>=</font> <font color='#979000'>false</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_trace<font face='Lucida Console'>)</font> <b>{</b>
<font color='#0000FF'>#if</font> <font color='#5555FF'>!</font>defined<font face='Lucida Console'>(</font>PYPY_VERSION<font face='Lucida Console'>)</font>
            <font color='#0000FF'>auto</font> <font color='#5555FF'>*</font>tb <font color='#5555FF'>=</font> <font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font>PyTracebackObject <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>m_trace.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

            <font color='#009900'>// Get the deepest trace possible.
</font>            <font color='#0000FF'>while</font> <font face='Lucida Console'>(</font>tb<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>tb_next<font face='Lucida Console'>)</font> <b>{</b>
                tb <font color='#5555FF'>=</font> tb<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>tb_next;
            <b>}</b>

            PyFrameObject <font color='#5555FF'>*</font>frame <font color='#5555FF'>=</font> tb<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>tb_frame;
            <font color='#BB00BB'>Py_XINCREF</font><font face='Lucida Console'>(</font>frame<font face='Lucida Console'>)</font>;
            result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>\n\nAt:\n</font>";
            <font color='#0000FF'>while</font> <font face='Lucida Console'>(</font>frame<font face='Lucida Console'>)</font> <b>{</b>
#    <font color='#0000FF'>if</font> PY_VERSION_HEX <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0x030900B1</font>
                PyCodeObject <font color='#5555FF'>*</font>f_code <font color='#5555FF'>=</font> <font color='#BB00BB'>PyFrame_GetCode</font><font face='Lucida Console'>(</font>frame<font face='Lucida Console'>)</font>;
#    <font color='#0000FF'>else</font>
                PyCodeObject <font color='#5555FF'>*</font>f_code <font color='#5555FF'>=</font> frame<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>f_code;
                <font color='#BB00BB'>Py_INCREF</font><font face='Lucida Console'>(</font>f_code<font face='Lucida Console'>)</font>;
#    endif
                <font color='#0000FF'><u>int</u></font> lineno <font color='#5555FF'>=</font> <font color='#BB00BB'>PyFrame_GetLineNumber</font><font face='Lucida Console'>(</font>frame<font face='Lucida Console'>)</font>;
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>  </font>";
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font>f_code<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>co_filename<font face='Lucida Console'>)</font>.cast<font color='#5555FF'>&lt;</font>std::string<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> '<font color='#FF0000'>(</font>';
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> std::<font color='#BB00BB'>to_string</font><font face='Lucida Console'>(</font>lineno<font face='Lucida Console'>)</font>;
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>): </font>";
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font>f_code<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>co_name<font face='Lucida Console'>)</font>.cast<font color='#5555FF'>&lt;</font>std::string<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> '<font color='#FF0000'>\n</font>';
                <font color='#BB00BB'>Py_DECREF</font><font face='Lucida Console'>(</font>f_code<font face='Lucida Console'>)</font>;
#    <font color='#0000FF'>if</font> PY_VERSION_HEX <font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font> <font color='#979000'>0x030900B1</font>
                <font color='#0000FF'>auto</font> <font color='#5555FF'>*</font>b_frame <font color='#5555FF'>=</font> <font color='#BB00BB'>PyFrame_GetBack</font><font face='Lucida Console'>(</font>frame<font face='Lucida Console'>)</font>;
#    <font color='#0000FF'>else</font>
                <font color='#0000FF'>auto</font> <font color='#5555FF'>*</font>b_frame <font color='#5555FF'>=</font> frame<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>f_back;
                <font color='#BB00BB'>Py_XINCREF</font><font face='Lucida Console'>(</font>b_frame<font face='Lucida Console'>)</font>;
#    endif
                <font color='#BB00BB'>Py_DECREF</font><font face='Lucida Console'>(</font>frame<font face='Lucida Console'>)</font>;
                frame <font color='#5555FF'>=</font> b_frame;
            <b>}</b>

            have_trace <font color='#5555FF'>=</font> <font color='#979000'>true</font>;
<font color='#0000FF'>#endif</font> <font color='#009900'>//! defined(PYPY_VERSION)
</font>        <b>}</b>

        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>message_error_string.<font color='#BB00BB'>empty</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>have_trace<font face='Lucida Console'>)</font> <b>{</b>
                result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> '<font color='#FF0000'>\n</font>';
            <b>}</b>
            result <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>\nMESSAGE UNAVAILABLE DUE TO EXCEPTION: </font>" <font color='#5555FF'>+</font> message_error_string;
        <b>}</b>

        <font color='#0000FF'>return</font> result;
    <b>}</b>

    std::string <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font><b><a name='error_string'></a>error_string</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_lazy_error_string_completed<font face='Lucida Console'>)</font> <b>{</b>
            m_lazy_error_string <font color='#5555FF'>+</font><font color='#5555FF'>=</font> "<font color='#CC0000'>: </font>" <font color='#5555FF'>+</font> <font color='#BB00BB'>format_value_and_trace</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            m_lazy_error_string_completed <font color='#5555FF'>=</font> <font color='#979000'>true</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> m_lazy_error_string;
    <b>}</b>

    <font color='#0000FF'><u>void</u></font> <b><a name='restore'></a>restore</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_restore_called<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Internal error: pybind11::detail::error_fetch_and_normalize::restore() </font>"
                          "<font color='#CC0000'>called a second time. ORIGINAL ERROR: </font>"
                          <font color='#5555FF'>+</font> <font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#BB00BB'>PyErr_Restore</font><font face='Lucida Console'>(</font>m_type.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, m_value.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, m_trace.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        m_restore_called <font color='#5555FF'>=</font> <font color='#979000'>true</font>;
    <b>}</b>

    <font color='#0000FF'><u>bool</u></font> <b><a name='matches'></a>matches</b><font face='Lucida Console'>(</font>handle exc<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyErr_GivenExceptionMatches</font><font face='Lucida Console'>(</font>m_type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, exc.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#009900'>// Not protecting these for simplicity.
</font>    object m_type, m_value, m_trace;

<font color='#0000FF'>private</font>:
    <font color='#009900'>// Only protecting invariants.
</font>    <font color='#0000FF'>mutable</font> std::string m_lazy_error_string;
    <font color='#0000FF'>mutable</font> <font color='#0000FF'><u>bool</u></font> m_lazy_error_string_completed <font color='#5555FF'>=</font> <font color='#979000'>false</font>;
    <font color='#0000FF'>mutable</font> <font color='#0000FF'><u>bool</u></font> m_restore_called <font color='#5555FF'>=</font> <font color='#979000'>false</font>;
<b>}</b>;

<font color='#0000FF'>inline</font> std::string <b><a name='error_string'></a>error_string</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>error_fetch_and_normalize</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>pybind11::detail::error_string</font>"<font face='Lucida Console'>)</font>.<font color='#BB00BB'>error_string</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
<b>}</b>

<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>

<font color='#009900'>/// Fetch and hold an error which was already set in Python.  An instance of this is typically
</font><font color='#009900'>/// thrown to propagate python-side errors back through C++ which can either be caught manually or
</font><font color='#009900'>/// else falls back to the function dispatcher (which then raises the captured error back to
</font><font color='#009900'>/// python).
</font><font color='#0000FF'>class</font> PYBIND11_EXPORT_EXCEPTION error_already_set : <font color='#0000FF'>public</font> std::exception <b>{</b>
<font color='#0000FF'>public</font>:
    <font color='#009900'>/// Fetches the current Python exception (using PyErr_Fetch()), which will clear the
</font>    <font color='#009900'>/// current Python error indicator.
</font>    <b><a name='error_already_set'></a>error_already_set</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>
        : m_fetched_error<b>{</b><font color='#0000FF'>new</font> detail::<font color='#BB00BB'>error_fetch_and_normalize</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>pybind11::error_already_set</font>"<font face='Lucida Console'>)</font>,
                          m_fetched_error_deleter<b>}</b> <b>{</b><b>}</b>

    <font color='#009900'>/// The what() result is built lazily on demand.
</font>    <font color='#009900'>/// WARNING: This member function needs to acquire the Python GIL. This can lead to
</font>    <font color='#009900'>///          crashes (undefined behavior) if the Python interpreter is finalizing.
</font>    <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><b><a name='what'></a>what</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> noexcept override;

    <font color='#009900'>/// Restores the currently-held Python error (which will clear the Python error indicator first
</font>    <font color='#009900'>/// if already set).
</font>    <font color='#009900'>/// NOTE: This member function will always restore the normalized exception, which may or may
</font>    <font color='#009900'>///       not be the original Python exception.
</font>    <font color='#009900'>/// WARNING: The GIL must be held when this member function is called!
</font>    <font color='#0000FF'><u>void</u></font> <b><a name='restore'></a>restore</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> m_fetched_error<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>restore</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#009900'>/// If it is impossible to raise the currently-held error, such as in a destructor, we can
</font>    <font color='#009900'>/// write it out using Python's unraisable hook (`sys.unraisablehook`). The error context
</font>    <font color='#009900'>/// should be some object whose `repr()` helps identify the location of the error. Python
</font>    <font color='#009900'>/// already knows the type and value of the error, so there is no need to repeat that.
</font>    <font color='#0000FF'><u>void</u></font> <b><a name='discard_as_unraisable'></a>discard_as_unraisable</b><font face='Lucida Console'>(</font>object err_context<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>restore</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#BB00BB'>PyErr_WriteUnraisable</font><font face='Lucida Console'>(</font>err_context.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#009900'>/// An alternate version of `discard_as_unraisable()`, where a string provides information on
</font>    <font color='#009900'>/// the location of the error. For example, `__func__` could be helpful.
</font>    <font color='#009900'>/// WARNING: The GIL must be held when this member function is called!
</font>    <font color='#0000FF'><u>void</u></font> <b><a name='discard_as_unraisable'></a>discard_as_unraisable</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>err_context<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>discard_as_unraisable</font><font face='Lucida Console'>(</font>reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PYBIND11_FROM_STRING</font><font face='Lucida Console'>(</font>err_context<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#009900'>// Does nothing; provided for backwards compatibility.
</font>    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use of error_already_set.clear() is deprecated</font>"<font face='Lucida Console'>)</font>
    <font color='#0000FF'><u>void</u></font> <b><a name='clear'></a>clear</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#009900'>/// Check if the currently trapped error type matches the given Python exception class (or a
</font>    <font color='#009900'>/// subclass thereof).  May also be passed a tuple to search for any exception class matches in
</font>    <font color='#009900'>/// the given tuple.
</font>    <font color='#0000FF'><u>bool</u></font> <b><a name='matches'></a>matches</b><font face='Lucida Console'>(</font>handle exc<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_fetched_error<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>matches</font><font face='Lucida Console'>(</font>exc<font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#0000FF'>const</font> object <font color='#5555FF'>&amp;</font><b><a name='type'></a>type</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_fetched_error<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>m_type; <b>}</b>
    <font color='#0000FF'>const</font> object <font color='#5555FF'>&amp;</font><b><a name='value'></a>value</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_fetched_error<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>m_value; <b>}</b>
    <font color='#0000FF'>const</font> object <font color='#5555FF'>&amp;</font><b><a name='trace'></a>trace</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_fetched_error<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>m_trace; <b>}</b>

<font color='#0000FF'>private</font>:
    std::shared_ptr<font color='#5555FF'>&lt;</font>detail::error_fetch_and_normalize<font color='#5555FF'>&gt;</font> m_fetched_error;

    <font color='#009900'>/// WARNING: This custom deleter needs to acquire the Python GIL. This can lead to
</font>    <font color='#009900'>///          crashes (undefined behavior) if the Python interpreter is finalizing.
</font>    <font color='#0000FF'>static</font> <font color='#0000FF'><u>void</u></font> <b><a name='m_fetched_error_deleter'></a>m_fetched_error_deleter</b><font face='Lucida Console'>(</font>detail::error_fetch_and_normalize <font color='#5555FF'>*</font>raw_ptr<font face='Lucida Console'>)</font>;
<b>}</b>;

<font color='#009900'>/// Replaces the current Python error indicator with the chosen error, performing a
</font><font color='#009900'>/// 'raise from' to indicate that the chosen error was caused by the original error.
</font><font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='raise_from'></a>raise_from</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>type, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>message<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>// Based on _PyErr_FormatVFromCause:
</font>    <font color='#009900'>// https://github.com/python/cpython/blob/467ab194fc6189d9f7310c89937c51abeac56839/Python/errors.c#L405
</font>    <font color='#009900'>// See https://github.com/pybind/pybind11/pull/2112 for details.
</font>    PyObject <font color='#5555FF'>*</font>exc <font color='#5555FF'>=</font> nullptr, <font color='#5555FF'>*</font>val <font color='#5555FF'>=</font> nullptr, <font color='#5555FF'>*</font>val2 <font color='#5555FF'>=</font> nullptr, <font color='#5555FF'>*</font>tb <font color='#5555FF'>=</font> nullptr;

    <font color='#BB00BB'>assert</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>PyErr_Fetch</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>exc, <font color='#5555FF'>&amp;</font>val, <font color='#5555FF'>&amp;</font>tb<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>PyErr_NormalizeException</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>exc, <font color='#5555FF'>&amp;</font>val, <font color='#5555FF'>&amp;</font>tb<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>tb <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>PyException_SetTraceback</font><font face='Lucida Console'>(</font>val, tb<font face='Lucida Console'>)</font>;
        <font color='#BB00BB'>Py_DECREF</font><font face='Lucida Console'>(</font>tb<font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#BB00BB'>Py_DECREF</font><font face='Lucida Console'>(</font>exc<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>assert</font><font face='Lucida Console'>(</font><font color='#5555FF'>!</font><font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    <font color='#BB00BB'>PyErr_SetString</font><font face='Lucida Console'>(</font>type, message<font face='Lucida Console'>)</font>;

    <font color='#BB00BB'>PyErr_Fetch</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>exc, <font color='#5555FF'>&amp;</font>val2, <font color='#5555FF'>&amp;</font>tb<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>PyErr_NormalizeException</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>exc, <font color='#5555FF'>&amp;</font>val2, <font color='#5555FF'>&amp;</font>tb<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>Py_INCREF</font><font face='Lucida Console'>(</font>val<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>PyException_SetCause</font><font face='Lucida Console'>(</font>val2, val<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>PyException_SetContext</font><font face='Lucida Console'>(</font>val2, val<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>PyErr_Restore</font><font face='Lucida Console'>(</font>exc, val2, tb<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#009900'>/// Sets the current Python error indicator with the chosen error, performing a 'raise from'
</font><font color='#009900'>/// from the error contained in error_already_set to indicate that the chosen error was
</font><font color='#009900'>/// caused by the original error.
</font><font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='raise_from'></a>raise_from</b><font face='Lucida Console'>(</font>error_already_set <font color='#5555FF'>&amp;</font>err, PyObject <font color='#5555FF'>*</font>type, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>message<font face='Lucida Console'>)</font> <b>{</b>
    err.<font color='#BB00BB'>restore</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>raise_from</font><font face='Lucida Console'>(</font>type, message<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#009900'>/** \defgroup python_builtins const_name
    Unless stated otherwise, the following C++ functions behave the same
    as their Python counterparts.
 */</font>

<font color='#009900'>/** \ingroup python_builtins
    \rst
    Return true if ``obj`` is an instance of ``T``. Type ``T`` must be a subclass of
    `object` or a class which was exposed to Python as ``py::class_&lt;T&gt;``.
\endrst */</font>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_base_of<font color='#5555FF'>&lt;</font>object, T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
<font color='#0000FF'><u>bool</u></font> <b><a name='isinstance'></a>isinstance</b><font face='Lucida Console'>(</font>handle obj<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> T::<font color='#BB00BB'>check_</font><font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font><font color='#5555FF'>!</font>std::is_base_of<font color='#5555FF'>&lt;</font>object, T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
<font color='#0000FF'><u>bool</u></font> <b><a name='isinstance'></a>isinstance</b><font face='Lucida Console'>(</font>handle obj<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> detail::<font color='#BB00BB'>isinstance_generic</font><font face='Lucida Console'>(</font>obj, <font color='#0000FF'>typeid</font><font face='Lucida Console'>(</font>T<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&gt;</font>
<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> isinstance<font color='#5555FF'>&lt;</font>handle<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>handle<font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>delete</font>;
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&gt;</font>
<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> isinstance<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>handle obj<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr;
<b>}</b>

<font color='#009900'>/// \ingroup python_builtins
</font><font color='#009900'>/// Return true if ``obj`` is an instance of the ``type``.
</font><font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='isinstance'></a>isinstance</b><font face='Lucida Console'>(</font>handle obj, handle type<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>const</font> <font color='#0000FF'>auto</font> result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_IsInstance</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, type.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>result <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> result <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>;
<b>}</b>

<font color='#009900'>/// \addtogroup python_builtins
</font><font color='#009900'>/// @{
</font><font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='hasattr'></a>hasattr</b><font face='Lucida Console'>(</font>handle obj, handle name<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>PyObject_HasAttr</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>1</font>;
<b>}</b>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='hasattr'></a>hasattr</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>PyObject_HasAttrString</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name<font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>1</font>;
<b>}</b>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='delattr'></a>delattr</b><font face='Lucida Console'>(</font>handle obj, handle name<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_DelAttr</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='delattr'></a>delattr</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_DelAttrString</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>

<font color='#0000FF'>inline</font> object <b><a name='getattr'></a>getattr</b><font face='Lucida Console'>(</font>handle obj, handle name<font face='Lucida Console'>)</font> <b>{</b>
    PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_GetAttr</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>inline</font> object <b><a name='getattr'></a>getattr</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name<font face='Lucida Console'>)</font> <b>{</b>
    PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_GetAttrString</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>inline</font> object <b><a name='getattr'></a>getattr</b><font face='Lucida Console'>(</font>handle obj, handle name, handle default_<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_GetAttr</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#BB00BB'>PyErr_Clear</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>return</font> reinterpret_borrow<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>default_<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>inline</font> object <b><a name='getattr'></a>getattr</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name, handle default_<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_GetAttrString</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#BB00BB'>PyErr_Clear</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>return</font> reinterpret_borrow<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>default_<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='setattr'></a>setattr</b><font face='Lucida Console'>(</font>handle obj, handle name, handle value<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_SetAttr</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>void</u></font> <b><a name='setattr'></a>setattr</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name, handle value<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_SetAttrString</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, name, value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>

<font color='#0000FF'>inline</font> ssize_t <b><a name='hash'></a>hash</b><font face='Lucida Console'>(</font>handle obj<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>auto</font> h <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_Hash</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>h <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> h;
<b>}</b>

<font color='#009900'>/// @} python_builtins
</font>
<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>
<font color='#0000FF'>inline</font> handle <b><a name='get_function'></a>get_function</b><font face='Lucida Console'>(</font>handle value<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyInstanceMethod_Check</font><font face='Lucida Console'>(</font>value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            value <font color='#5555FF'>=</font> <font color='#BB00BB'>PyInstanceMethod_GET_FUNCTION</font><font face='Lucida Console'>(</font>value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <b>}</b> <font color='#0000FF'>else</font> <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyMethod_Check</font><font face='Lucida Console'>(</font>value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            value <font color='#5555FF'>=</font> <font color='#BB00BB'>PyMethod_GET_FUNCTION</font><font face='Lucida Console'>(</font>value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'>return</font> value;
<b>}</b>

<font color='#009900'>// Reimplementation of python's dict helper functions to ensure that exceptions
</font><font color='#009900'>// aren't swallowed (see #2862)
</font>
<font color='#009900'>// copied from cpython _PyDict_GetItemStringWithError
</font><font color='#0000FF'>inline</font> PyObject <font color='#5555FF'>*</font><b><a name='dict_getitemstring'></a>dict_getitemstring</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>v, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>key<font face='Lucida Console'>)</font> <b>{</b>
    PyObject <font color='#5555FF'>*</font>kv <font color='#5555FF'>=</font> nullptr, <font color='#5555FF'>*</font>rv <font color='#5555FF'>=</font> nullptr;
    kv <font color='#5555FF'>=</font> <font color='#BB00BB'>PyUnicode_FromString</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>kv <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    rv <font color='#5555FF'>=</font> <font color='#BB00BB'>PyDict_GetItemWithError</font><font face='Lucida Console'>(</font>v, kv<font face='Lucida Console'>)</font>;
    <font color='#BB00BB'>Py_DECREF</font><font face='Lucida Console'>(</font>kv<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>rv <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> rv;
<b>}</b>

<font color='#0000FF'>inline</font> PyObject <font color='#5555FF'>*</font><b><a name='dict_getitem'></a>dict_getitem</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>v, PyObject <font color='#5555FF'>*</font>key<font face='Lucida Console'>)</font> <b>{</b>
    PyObject <font color='#5555FF'>*</font>rv <font color='#5555FF'>=</font> <font color='#BB00BB'>PyDict_GetItemWithError</font><font face='Lucida Console'>(</font>v, key<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>rv <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> rv;
<b>}</b>

<font color='#009900'>// Helper aliases/functions to support implicit casting of values given to python
</font><font color='#009900'>// accessors/methods. When given a pyobject, this simply returns the pyobject as-is; for other C++
</font><font color='#009900'>// type, the value goes through pybind11::cast(obj) to convert it to an `object`.
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, enable_if_t<font color='#5555FF'>&lt;</font>is_pyobject<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
<font color='#0000FF'>auto</font> <b><a name='object_or_cast'></a>object_or_cast</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font> <b><a name='decltype'></a>decltype</b><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
<b>}</b>
<font color='#009900'>// The following casting version is implemented in cast.h:
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, enable_if_t<font color='#5555FF'>&lt;</font><font color='#5555FF'>!</font>is_pyobject<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
object <b><a name='object_or_cast'></a>object_or_cast</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font>;
<font color='#009900'>// Match a PyObject*, which we want to convert directly to handle via its converting constructor
</font><font color='#0000FF'>inline</font> handle <b><a name='object_or_cast'></a>object_or_cast</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>ptr<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> ptr; <b>}</b>

PYBIND11_WARNING_PUSH
<b><a name='PYBIND11_WARNING_DISABLE_MSVC'></a>PYBIND11_WARNING_DISABLE_MSVC</b><font face='Lucida Console'>(</font><font color='#979000'>4522</font><font face='Lucida Console'>)</font> <font color='#009900'>// warning C4522: multiple assignment operators specified
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> Policy<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>class</font> <b><a name='accessor'></a>accessor</b> : <font color='#0000FF'>public</font> object_api<font color='#5555FF'>&lt;</font>accessor<font color='#5555FF'>&lt;</font>Policy<font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font> <b>{</b>
    <font color='#0000FF'>using</font> key_type <font color='#5555FF'>=</font> <font color='#0000FF'>typename</font> Policy::key_type;

<font color='#0000FF'>public</font>:
    <b><a name='accessor'></a>accessor</b><font face='Lucida Console'>(</font>handle obj, key_type key<font face='Lucida Console'>)</font> : obj<font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font>, key<font face='Lucida Console'>(</font>std::move<font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
    <b><a name='accessor'></a>accessor</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> accessor <font color='#5555FF'>&amp;</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;
    <b><a name='accessor'></a>accessor</b><font face='Lucida Console'>(</font>accessor <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font><font face='Lucida Console'>)</font> noexcept <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;

    <font color='#009900'>// accessor overload required to override default assignment operator (templates are not
</font>    <font color='#009900'>// allowed to replace default compiler-generated assignments).
</font>    <font color='#0000FF'><u>void</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> accessor <font color='#5555FF'>&amp;</font>a<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <b>{</b> std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font><font color='#5555FF'>*</font><font color='#0000FF'>this</font><font face='Lucida Console'>)</font>.<font color='#0000FF'>operator</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font>a<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> accessor <font color='#5555FF'>&amp;</font>a<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> <b>{</b> <font color='#0000FF'>operator</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font>a<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>void</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>value<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <b>{</b>
        Policy::<font color='#BB00BB'>set</font><font face='Lucida Console'>(</font>obj, key, <font color='#BB00BB'>object_or_cast</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>void</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>value<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> <b>{</b>
        <font color='#BB00BB'>get_cache</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#BB00BB'>ensure_object</font><font face='Lucida Console'>(</font><font color='#BB00BB'>object_or_cast</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T <font color='#5555FF'>=</font> Policy<font color='#5555FF'>&gt;</font>
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>
        "<font color='#CC0000'>Use of obj.attr(...) as bool is deprecated in favor of pybind11::hasattr(obj, ...)</font>"<font face='Lucida Console'>)</font>
    <font color='#0000FF'>explicit</font>
    <b><a name='operator'></a>operator</b> enable_if_t<font color='#5555FF'>&lt;</font>std::is_same<font color='#5555FF'>&lt;</font>T, accessor_policies::str_attr<font color='#5555FF'>&gt;</font>::value
                             <font color='#5555FF'>|</font><font color='#5555FF'>|</font> std::is_same<font color='#5555FF'>&lt;</font>T, accessor_policies::obj_attr<font color='#5555FF'>&gt;</font>::value,
                         <font color='#0000FF'><u>bool</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>hasattr</font><font face='Lucida Console'>(</font>obj, key<font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T <font color='#5555FF'>=</font> Policy<font color='#5555FF'>&gt;</font>
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use of obj[key] as bool is deprecated in favor of obj.contains(key)</font>"<font face='Lucida Console'>)</font>
    <font color='#0000FF'>explicit</font>
    <b><a name='operator'></a>operator</b> enable_if_t<font color='#5555FF'>&lt;</font>std::is_same<font color='#5555FF'>&lt;</font>T, accessor_policies::generic_item<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>bool</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> obj.<font color='#BB00BB'>contains</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> <b><a name='object'></a>object</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>get_cache</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
    PyObject <font color='#5555FF'>*</font><b><a name='ptr'></a>ptr</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>get_cache</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    T <b><a name='cast'></a>cast</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>get_cache</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#0000FF'>template</font> cast<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#0000FF'>static</font> object <b><a name='ensure_object'></a>ensure_object</b><font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>static</font> object <b><a name='ensure_object'></a>ensure_object</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> reinterpret_borrow<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>h<font face='Lucida Console'>)</font>; <b>}</b>

    object <font color='#5555FF'>&amp;</font><b><a name='get_cache'></a>get_cache</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>cache<font face='Lucida Console'>)</font> <b>{</b>
            cache <font color='#5555FF'>=</font> Policy::<font color='#BB00BB'>get</font><font face='Lucida Console'>(</font>obj, key<font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> cache;
    <b>}</b>

<font color='#0000FF'>private</font>:
    handle obj;
    key_type key;
    <font color='#0000FF'>mutable</font> object cache;
<b>}</b>;
PYBIND11_WARNING_POP

<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>accessor_policies<font face='Lucida Console'>)</font>
<font color='#0000FF'>struct</font> <b><a name='obj_attr'></a>obj_attr</b> <b>{</b>
    <font color='#0000FF'>using</font> key_type <font color='#5555FF'>=</font> object;
    <font color='#0000FF'>static</font> object <b><a name='get'></a>get</b><font face='Lucida Console'>(</font>handle obj, handle key<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>getattr</font><font face='Lucida Console'>(</font>obj, key<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>static</font> <font color='#0000FF'><u>void</u></font> <b><a name='set'></a>set</b><font face='Lucida Console'>(</font>handle obj, handle key, handle val<font face='Lucida Console'>)</font> <b>{</b> <font color='#BB00BB'>setattr</font><font face='Lucida Console'>(</font>obj, key, val<font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<font color='#0000FF'>struct</font> <b><a name='str_attr'></a>str_attr</b> <b>{</b>
    <font color='#0000FF'>using</font> key_type <font color='#5555FF'>=</font> <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>;
    <font color='#0000FF'>static</font> object <b><a name='get'></a>get</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>key<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>getattr</font><font face='Lucida Console'>(</font>obj, key<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>static</font> <font color='#0000FF'><u>void</u></font> <b><a name='set'></a>set</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>key, handle val<font face='Lucida Console'>)</font> <b>{</b> <font color='#BB00BB'>setattr</font><font face='Lucida Console'>(</font>obj, key, val<font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<font color='#0000FF'>struct</font> <b><a name='generic_item'></a>generic_item</b> <b>{</b>
    <font color='#0000FF'>using</font> key_type <font color='#5555FF'>=</font> object;

    <font color='#0000FF'>static</font> object <b><a name='get'></a>get</b><font face='Lucida Console'>(</font>handle obj, handle key<font face='Lucida Console'>)</font> <b>{</b>
        PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_GetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, key.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>static</font> <font color='#0000FF'><u>void</u></font> <b><a name='set'></a>set</b><font face='Lucida Console'>(</font>handle obj, handle key, handle val<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_SetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, key.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, val.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>struct</font> <b><a name='sequence_item'></a>sequence_item</b> <b>{</b>
    <font color='#0000FF'>using</font> key_type <font color='#5555FF'>=</font> <font color='#0000FF'><u>size_t</u></font>;

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> IdxType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>IdxType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> object <b><a name='get'></a>get</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> IdxType <font color='#5555FF'>&amp;</font>index<font face='Lucida Console'>)</font> <b>{</b>
        PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PySequence_GetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#BB00BB'>ssize_t_cast</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> IdxType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>IdxType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> <font color='#0000FF'><u>void</u></font> <b><a name='set'></a>set</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> IdxType <font color='#5555FF'>&amp;</font>index, handle val<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#009900'>// PySequence_SetItem does not steal a reference to 'val'
</font>        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PySequence_SetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#BB00BB'>ssize_t_cast</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font>, val.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>struct</font> <b><a name='list_item'></a>list_item</b> <b>{</b>
    <font color='#0000FF'>using</font> key_type <font color='#5555FF'>=</font> <font color='#0000FF'><u>size_t</u></font>;

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> IdxType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>IdxType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> object <b><a name='get'></a>get</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> IdxType <font color='#5555FF'>&amp;</font>index<font face='Lucida Console'>)</font> <b>{</b>
        PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyList_GetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#BB00BB'>ssize_t_cast</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> reinterpret_borrow<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> IdxType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>IdxType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> <font color='#0000FF'><u>void</u></font> <b><a name='set'></a>set</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> IdxType <font color='#5555FF'>&amp;</font>index, handle val<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#009900'>// PyList_SetItem steals a reference to 'val'
</font>        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyList_SetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#BB00BB'>ssize_t_cast</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font>, val.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>struct</font> <b><a name='tuple_item'></a>tuple_item</b> <b>{</b>
    <font color='#0000FF'>using</font> key_type <font color='#5555FF'>=</font> <font color='#0000FF'><u>size_t</u></font>;

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> IdxType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>IdxType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> object <b><a name='get'></a>get</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> IdxType <font color='#5555FF'>&amp;</font>index<font face='Lucida Console'>)</font> <b>{</b>
        PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyTuple_GetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#BB00BB'>ssize_t_cast</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> reinterpret_borrow<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> IdxType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>IdxType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> <font color='#0000FF'><u>void</u></font> <b><a name='set'></a>set</b><font face='Lucida Console'>(</font>handle obj, <font color='#0000FF'>const</font> IdxType <font color='#5555FF'>&amp;</font>index, handle val<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#009900'>// PyTuple_SetItem steals a reference to 'val'
</font>        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyTuple_SetItem</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#BB00BB'>ssize_t_cast</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font>, val.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
<b>}</b>;
<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>accessor_policies<font face='Lucida Console'>)</font>

<font color='#009900'>/// STL iterator template used for tuple, list, sequence and dict
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> Policy<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>class</font> <b><a name='generic_iterator'></a>generic_iterator</b> : <font color='#0000FF'>public</font> Policy <b>{</b>
    <font color='#0000FF'>using</font> It <font color='#5555FF'>=</font> generic_iterator;

<font color='#0000FF'>public</font>:
    <font color='#0000FF'>using</font> difference_type <font color='#5555FF'>=</font> ssize_t;
    <font color='#0000FF'>using</font> iterator_category <font color='#5555FF'>=</font> <font color='#0000FF'>typename</font> Policy::iterator_category;
    <font color='#0000FF'>using</font> value_type <font color='#5555FF'>=</font> <font color='#0000FF'>typename</font> Policy::value_type;
    <font color='#0000FF'>using</font> reference <font color='#5555FF'>=</font> <font color='#0000FF'>typename</font> Policy::reference;
    <font color='#0000FF'>using</font> pointer <font color='#5555FF'>=</font> <font color='#0000FF'>typename</font> Policy::pointer;

    <b><a name='generic_iterator'></a>generic_iterator</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;
    <b><a name='generic_iterator'></a>generic_iterator</b><font face='Lucida Console'>(</font>handle seq, ssize_t index<font face='Lucida Console'>)</font> : Policy<font face='Lucida Console'>(</font>seq, index<font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#009900'>// NOLINTNEXTLINE(readability-const-return-type) // PR #3263
</font>    reference <b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> Policy::<font color='#BB00BB'>dereference</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#009900'>// NOLINTNEXTLINE(readability-const-return-type) // PR #3263
</font>    reference <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>difference_type n<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font color='#5555FF'>*</font><font color='#0000FF'>this</font> <font color='#5555FF'>+</font> n<font face='Lucida Console'>)</font>; <b>}</b>
    pointer <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#5555FF'>*</font><font color='#0000FF'>this</font>; <b>}</b>

    It <font color='#5555FF'>&amp;</font><b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        Policy::<font color='#BB00BB'>increment</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>
    It <b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>auto</font> copy <font color='#5555FF'>=</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
        Policy::<font color='#BB00BB'>increment</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> copy;
    <b>}</b>
    It <font color='#5555FF'>&amp;</font><b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        Policy::<font color='#BB00BB'>decrement</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>
    It <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>auto</font> copy <font color='#5555FF'>=</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
        Policy::<font color='#BB00BB'>decrement</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> copy;
    <b>}</b>
    It <font color='#5555FF'>&amp;</font><b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>difference_type n<font face='Lucida Console'>)</font> <b>{</b>
        Policy::<font color='#BB00BB'>advance</font><font face='Lucida Console'>(</font>n<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>
    It <font color='#5555FF'>&amp;</font><b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font>difference_type n<font face='Lucida Console'>)</font> <b>{</b>
        Policy::<font color='#BB00BB'>advance</font><font face='Lucida Console'>(</font><font color='#5555FF'>-</font>n<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>

    <font color='#0000FF'>friend</font> It <b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, difference_type n<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>auto</font> copy <font color='#5555FF'>=</font> a;
        <font color='#0000FF'>return</font> copy <font color='#5555FF'>+</font><font color='#5555FF'>=</font> n;
    <b>}</b>
    <font color='#0000FF'>friend</font> It <b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font face='Lucida Console'>(</font>difference_type n, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> b <font color='#5555FF'>+</font> n; <b>}</b>
    <font color='#0000FF'>friend</font> It <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, difference_type n<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>auto</font> copy <font color='#5555FF'>=</font> a;
        <font color='#0000FF'>return</font> copy <font color='#5555FF'>-</font><font color='#5555FF'>=</font> n;
    <b>}</b>
    <font color='#0000FF'>friend</font> difference_type <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> a.<font color='#BB00BB'>distance_to</font><font face='Lucida Console'>(</font>b<font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> a.<font color='#BB00BB'>equal</font><font face='Lucida Console'>(</font>b<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>!</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#5555FF'>!</font><font face='Lucida Console'>(</font>a <font color='#5555FF'>=</font><font color='#5555FF'>=</font> b<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> b <font color='#5555FF'>-</font> a <font color='#5555FF'>&gt;</font> <font color='#979000'>0</font>; <b>}</b>
    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> b <font color='#5555FF'>&lt;</font> a; <b>}</b>
    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#5555FF'>!</font><font face='Lucida Console'>(</font>a <font color='#5555FF'>&lt;</font> b<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> It <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#5555FF'>!</font><font face='Lucida Console'>(</font>a <font color='#5555FF'>&gt;</font> b<font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>iterator_policies<font face='Lucida Console'>)</font>
<font color='#009900'>/// Quick proxy class needed to implement ``operator-&gt;`` for iterators which can't return pointers
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>struct</font> <b><a name='arrow_proxy'></a>arrow_proxy</b> <b>{</b>
    T value;

    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='arrow_proxy'></a>arrow_proxy</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>value<font face='Lucida Console'>)</font> noexcept : <b><a name='value'></a>value</b><font face='Lucida Console'>(</font>std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
    T <font color='#5555FF'>*</font><b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#5555FF'>&amp;</font>value; <b>}</b>
<b>}</b>;

<font color='#009900'>/// Lightweight iterator policy using just a simple pointer: see ``PySequence_Fast_ITEMS``
</font><font color='#0000FF'>class</font> <b><a name='sequence_fast_readonly'></a>sequence_fast_readonly</b> <b>{</b>
<font color='#0000FF'>protected</font>:
    <font color='#0000FF'>using</font> iterator_category <font color='#5555FF'>=</font> std::random_access_iterator_tag;
    <font color='#0000FF'>using</font> value_type <font color='#5555FF'>=</font> handle;
    <font color='#0000FF'>using</font> reference <font color='#5555FF'>=</font> <font color='#0000FF'>const</font> handle; <font color='#009900'>// PR #3263
</font>    <font color='#0000FF'>using</font> pointer <font color='#5555FF'>=</font> arrow_proxy<font color='#5555FF'>&lt;</font><font color='#0000FF'>const</font> handle<font color='#5555FF'>&gt;</font>;

    <b><a name='sequence_fast_readonly'></a>sequence_fast_readonly</b><font face='Lucida Console'>(</font>handle obj, ssize_t n<font face='Lucida Console'>)</font> : ptr<font face='Lucida Console'>(</font>PySequence_Fast_ITEMS<font face='Lucida Console'>(</font>obj.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> n<font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#009900'>// NOLINTNEXTLINE(readability-const-return-type) // PR #3263
</font>    reference <b><a name='dereference'></a>dereference</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#5555FF'>*</font>ptr; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='increment'></a>increment</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#5555FF'>+</font><font color='#5555FF'>+</font>ptr; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='decrement'></a>decrement</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#5555FF'>-</font><font color='#5555FF'>-</font>ptr; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='advance'></a>advance</b><font face='Lucida Console'>(</font>ssize_t n<font face='Lucida Console'>)</font> <b>{</b> ptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> n; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='equal'></a>equal</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> sequence_fast_readonly <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> ptr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> b.ptr; <b>}</b>
    ssize_t <b><a name='distance_to'></a>distance_to</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> sequence_fast_readonly <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> ptr <font color='#5555FF'>-</font> b.ptr; <b>}</b>

<font color='#0000FF'>private</font>:
    PyObject <font color='#5555FF'>*</font><font color='#5555FF'>*</font>ptr;
<b>}</b>;

<font color='#009900'>/// Full read and write access using the sequence protocol: see ``detail::sequence_accessor``
</font><font color='#0000FF'>class</font> <b><a name='sequence_slow_readwrite'></a>sequence_slow_readwrite</b> <b>{</b>
<font color='#0000FF'>protected</font>:
    <font color='#0000FF'>using</font> iterator_category <font color='#5555FF'>=</font> std::random_access_iterator_tag;
    <font color='#0000FF'>using</font> value_type <font color='#5555FF'>=</font> object;
    <font color='#0000FF'>using</font> reference <font color='#5555FF'>=</font> sequence_accessor;
    <font color='#0000FF'>using</font> pointer <font color='#5555FF'>=</font> arrow_proxy<font color='#5555FF'>&lt;</font><font color='#0000FF'>const</font> sequence_accessor<font color='#5555FF'>&gt;</font>;

    <b><a name='sequence_slow_readwrite'></a>sequence_slow_readwrite</b><font face='Lucida Console'>(</font>handle obj, ssize_t index<font face='Lucida Console'>)</font> : obj<font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font>, index<font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    reference <b><a name='dereference'></a>dereference</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b>obj, <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>size_t</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font><b>}</b>; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='increment'></a>increment</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#5555FF'>+</font><font color='#5555FF'>+</font>index; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='decrement'></a>decrement</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#5555FF'>-</font><font color='#5555FF'>-</font>index; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='advance'></a>advance</b><font face='Lucida Console'>(</font>ssize_t n<font face='Lucida Console'>)</font> <b>{</b> index <font color='#5555FF'>+</font><font color='#5555FF'>=</font> n; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='equal'></a>equal</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> sequence_slow_readwrite <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> index <font color='#5555FF'>=</font><font color='#5555FF'>=</font> b.index; <b>}</b>
    ssize_t <b><a name='distance_to'></a>distance_to</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> sequence_slow_readwrite <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> index <font color='#5555FF'>-</font> b.index; <b>}</b>

<font color='#0000FF'>private</font>:
    handle obj;
    ssize_t index;
<b>}</b>;

<font color='#009900'>/// Python's dictionary protocol permits this to be a forward iterator
</font><font color='#0000FF'>class</font> <b><a name='dict_readonly'></a>dict_readonly</b> <b>{</b>
<font color='#0000FF'>protected</font>:
    <font color='#0000FF'>using</font> iterator_category <font color='#5555FF'>=</font> std::forward_iterator_tag;
    <font color='#0000FF'>using</font> value_type <font color='#5555FF'>=</font> std::pair<font color='#5555FF'>&lt;</font>handle, handle<font color='#5555FF'>&gt;</font>;
    <font color='#0000FF'>using</font> reference <font color='#5555FF'>=</font> <font color='#0000FF'>const</font> value_type; <font color='#009900'>// PR #3263
</font>    <font color='#0000FF'>using</font> pointer <font color='#5555FF'>=</font> arrow_proxy<font color='#5555FF'>&lt;</font><font color='#0000FF'>const</font> value_type<font color='#5555FF'>&gt;</font>;

    <b><a name='dict_readonly'></a>dict_readonly</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;
    <b><a name='dict_readonly'></a>dict_readonly</b><font face='Lucida Console'>(</font>handle obj, ssize_t pos<font face='Lucida Console'>)</font> : obj<font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font>, pos<font face='Lucida Console'>(</font>pos<font face='Lucida Console'>)</font> <b>{</b> <font color='#BB00BB'>increment</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#009900'>// NOLINTNEXTLINE(readability-const-return-type) // PR #3263
</font>    reference <b><a name='dereference'></a>dereference</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b>key, value<b>}</b>; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='increment'></a>increment</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyDict_Next</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>pos, <font color='#5555FF'>&amp;</font>key, <font color='#5555FF'>&amp;</font>value<font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            pos <font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='equal'></a>equal</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> dict_readonly <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> pos <font color='#5555FF'>=</font><font color='#5555FF'>=</font> b.pos; <b>}</b>

<font color='#0000FF'>private</font>:
    handle obj;
    PyObject <font color='#5555FF'>*</font>key <font color='#5555FF'>=</font> nullptr, <font color='#5555FF'>*</font>value <font color='#5555FF'>=</font> nullptr;
    ssize_t pos <font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font>;
<b>}</b>;
<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>iterator_policies<font face='Lucida Console'>)</font>

<font color='#0000FF'>#if</font> <font color='#5555FF'>!</font>defined<font face='Lucida Console'>(</font>PYPY_VERSION<font face='Lucida Console'>)</font>
<font color='#0000FF'>using</font> tuple_iterator <font color='#5555FF'>=</font> generic_iterator<font color='#5555FF'>&lt;</font>iterator_policies::sequence_fast_readonly<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> list_iterator <font color='#5555FF'>=</font> generic_iterator<font color='#5555FF'>&lt;</font>iterator_policies::sequence_fast_readonly<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>#else</font>
<font color='#0000FF'>using</font> tuple_iterator <font color='#5555FF'>=</font> generic_iterator<font color='#5555FF'>&lt;</font>iterator_policies::sequence_slow_readwrite<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> list_iterator <font color='#5555FF'>=</font> generic_iterator<font color='#5555FF'>&lt;</font>iterator_policies::sequence_slow_readwrite<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>#endif</font>

<font color='#0000FF'>using</font> sequence_iterator <font color='#5555FF'>=</font> generic_iterator<font color='#5555FF'>&lt;</font>iterator_policies::sequence_slow_readwrite<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>using</font> dict_iterator <font color='#5555FF'>=</font> generic_iterator<font color='#5555FF'>&lt;</font>iterator_policies::dict_readonly<font color='#5555FF'>&gt;</font>;

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='PyIterable_Check'></a>PyIterable_Check</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>obj<font face='Lucida Console'>)</font> <b>{</b>
    PyObject <font color='#5555FF'>*</font>iter <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_GetIter</font><font face='Lucida Console'>(</font>obj<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>iter<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>Py_DECREF</font><font face='Lucida Console'>(</font>iter<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#979000'>true</font>;
    <b>}</b>
    <font color='#BB00BB'>PyErr_Clear</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>return</font> <font color='#979000'>false</font>;
<b>}</b>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='PyNone_Check'></a>PyNone_Check</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> o <font color='#5555FF'>=</font><font color='#5555FF'>=</font> Py_None; <b>}</b>
<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='PyEllipsis_Check'></a>PyEllipsis_Check</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> o <font color='#5555FF'>=</font><font color='#5555FF'>=</font> Py_Ellipsis; <b>}</b>

<font color='#0000FF'>#ifdef</font> PYBIND11_STR_LEGACY_PERMISSIVE
<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='PyUnicode_Check_Permissive'></a>PyUnicode_Check_Permissive</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>PyUnicode_Check</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font> <font color='#5555FF'>|</font><font color='#5555FF'>|</font> <font color='#BB00BB'>PYBIND11_BYTES_CHECK</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
<b>}</b>
#    define PYBIND11_STR_CHECK_FUN detail::PyUnicode_Check_Permissive
<font color='#0000FF'>#else</font>
#    define PYBIND11_STR_CHECK_FUN PyUnicode_Check
<font color='#0000FF'>#endif</font>

<font color='#0000FF'>inline</font> <font color='#0000FF'><u>bool</u></font> <b><a name='PyStaticMethod_Check'></a>PyStaticMethod_Check</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> o<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>ob_type <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>&amp;</font>PyStaticMethod_Type; <b>}</b>

<font color='#0000FF'>class</font> <b><a name='kwargs_proxy'></a>kwargs_proxy</b> : <font color='#0000FF'>public</font> handle <b>{</b>
<font color='#0000FF'>public</font>:
    <font color='#0000FF'>explicit</font> <b><a name='kwargs_proxy'></a>kwargs_proxy</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> : handle<font face='Lucida Console'>(</font>h<font face='Lucida Console'>)</font> <b>{</b><b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='args_proxy'></a>args_proxy</b> : <font color='#0000FF'>public</font> handle <b>{</b>
<font color='#0000FF'>public</font>:
    <font color='#0000FF'>explicit</font> <b><a name='args_proxy'></a>args_proxy</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> : handle<font face='Lucida Console'>(</font>h<font face='Lucida Console'>)</font> <b>{</b><b>}</b>
    kwargs_proxy <b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>kwargs_proxy</font><font face='Lucida Console'>(</font><font color='#5555FF'>*</font><font color='#0000FF'>this</font><font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<font color='#009900'>/// Python argument categories (using PEP 448 terms)
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>using</font> is_keyword <font color='#5555FF'>=</font> std::is_base_of<font color='#5555FF'>&lt;</font>arg, T<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>using</font> is_s_unpacking <font color='#5555FF'>=</font> std::is_same<font color='#5555FF'>&lt;</font>args_proxy, T<font color='#5555FF'>&gt;</font>; <font color='#009900'>// * unpacking
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>using</font> is_ds_unpacking <font color='#5555FF'>=</font> std::is_same<font color='#5555FF'>&lt;</font>kwargs_proxy, T<font color='#5555FF'>&gt;</font>; <font color='#009900'>// ** unpacking
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>using</font> is_positional <font color='#5555FF'>=</font> satisfies_none_of<font color='#5555FF'>&lt;</font>T, is_keyword, is_s_unpacking, is_ds_unpacking<font color='#5555FF'>&gt;</font>;
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>using</font> is_keyword_or_ds <font color='#5555FF'>=</font> satisfies_any_of<font color='#5555FF'>&lt;</font>T, is_keyword, is_ds_unpacking<font color='#5555FF'>&gt;</font>;

<font color='#009900'>// Call argument collector forward declarations
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font>return_value_policy policy <font color='#5555FF'>=</font> return_value_policy::automatic_reference<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>class</font> <b><a name='simple_collector'></a>simple_collector</b>;
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font>return_value_policy policy <font color='#5555FF'>=</font> return_value_policy::automatic_reference<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>class</font> <b><a name='unpacking_collector'></a>unpacking_collector</b>;

<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>

<font color='#009900'>// TODO: After the deprecated constructors are removed, this macro can be simplified by
</font><font color='#009900'>//       inheriting ctors: `using Parent::Parent`. It's not an option right now because
</font><font color='#009900'>//       the `using` statement triggers the parent deprecation warning even if the ctor
</font><font color='#009900'>//       isn't even used.
</font><font color='#0000FF'>#define</font> PYBIND11_OBJECT_COMMON<font face='Lucida Console'>(</font>Name, Parent, CheckFun<font face='Lucida Console'>)</font>                                            \
<font color='#0000FF'>public</font>:                                                                                           \
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use reinterpret_borrow&lt;</font>" #Name "<font color='#CC0000'>&gt;() or reinterpret_steal&lt;</font>" #Name "<font color='#CC0000'>&gt;()</font>"<font face='Lucida Console'>)</font>  \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font>handle h, <font color='#0000FF'><u>bool</u></font> is_borrowed<font face='Lucida Console'>)</font>                                                              \
        : <b><a name='Parent'></a>Parent</b><font face='Lucida Console'>(</font>is_borrowed ? <font color='#BB00BB'>Parent</font><font face='Lucida Console'>(</font>h, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> : Parent<font face='Lucida Console'>(</font>h, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>                \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font>handle h, borrowed_t<font face='Lucida Console'>)</font> : Parent<font face='Lucida Console'>(</font>h, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b><b>}</b>                                       \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font>handle h, stolen_t<font face='Lucida Console'>)</font> : Parent<font face='Lucida Console'>(</font>h, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b><b>}</b>                                           \
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use py::isinstance&lt;py::python_type&gt;(obj) instead</font>"<font face='Lucida Console'>)</font>                       \
    <font color='#0000FF'><u>bool</u></font> <b><a name='check'></a>check</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> m_ptr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>CheckFun</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font>; <b>}</b>                     \
    <font color='#0000FF'>static</font> <font color='#0000FF'><u>bool</u></font> <b><a name='check_'></a>check_</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> h.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>CheckFun</font><font face='Lucida Console'>(</font>h.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>              \
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> Policy_<font color='#5555FF'>&gt;</font> <font color='#009900'>/* NOLINTNEXTLINE(google-explicit-constructor) */</font>                 \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> ::pybind11::detail::accessor<font color='#5555FF'>&lt;</font>Policy_<font color='#5555FF'>&gt;</font> <font color='#5555FF'>&amp;</font>a<font face='Lucida Console'>)</font> : Name<font face='Lucida Console'>(</font>object<font face='Lucida Console'>(</font>a<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

<font color='#0000FF'>#define</font> PYBIND11_OBJECT_CVT<font face='Lucida Console'>(</font>Name, Parent, CheckFun, ConvertFun<font face='Lucida Console'>)</font>                                   \
    <b><a name='PYBIND11_OBJECT_COMMON'></a>PYBIND11_OBJECT_COMMON</b><font face='Lucida Console'>(</font>Name, Parent, CheckFun<font face='Lucida Console'>)</font>                                                \
    <font color='#009900'>/* This is deliberately not 'explicit' to allow implicit conversion from object: */</font>           \
    <font color='#009900'>/* NOLINTNEXTLINE(google-explicit-constructor) */</font>                                             \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> object <font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font>                                                                         \
        : <b><a name='Parent'></a>Parent</b><font face='Lucida Console'>(</font><font color='#BB00BB'>check_</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font> ? o.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : ConvertFun<font face='Lucida Console'>(</font>o.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>               \
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font>                                                                               \
            <font color='#0000FF'>throw</font> ::pybind11::<font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;                                                \
    <b>}</b>                                                                                             \
    <font color='#009900'>/* NOLINTNEXTLINE(google-explicit-constructor) */</font>                                             \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> : Parent<font face='Lucida Console'>(</font>check_<font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font> ? o.release<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : ConvertFun<font face='Lucida Console'>(</font>o.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>  \
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font>                                                                               \
            <font color='#0000FF'>throw</font> ::pybind11::<font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;                                                \
    <b>}</b>

<font color='#0000FF'>#define</font> PYBIND11_OBJECT_CVT_DEFAULT<font face='Lucida Console'>(</font>Name, Parent, CheckFun, ConvertFun<font face='Lucida Console'>)</font>                           \
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>Name, Parent, CheckFun, ConvertFun<font face='Lucida Console'>)</font>                                       \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;

<font color='#0000FF'>#define</font> PYBIND11_OBJECT_CHECK_FAILED<font face='Lucida Console'>(</font>Name, o_ptr<font face='Lucida Console'>)</font>                                                 \
    ::pybind11::<b><a name='type_error'></a>type_error</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Object of type '</font>"                                                     \
                           <font color='#5555FF'>+</font> ::pybind11::detail::<font color='#BB00BB'>get_fully_qualified_tp_name</font><font face='Lucida Console'>(</font><font color='#BB00BB'>Py_TYPE</font><font face='Lucida Console'>(</font>o_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>      \
                           <font color='#5555FF'>+</font> "<font color='#CC0000'>' is not an instance of '</font>" #Name "<font color='#CC0000'>'</font>"<font face='Lucida Console'>)</font>

<font color='#0000FF'>#define</font> PYBIND11_OBJECT<font face='Lucida Console'>(</font>Name, Parent, CheckFun<font face='Lucida Console'>)</font>                                                   \
    <b><a name='PYBIND11_OBJECT_COMMON'></a>PYBIND11_OBJECT_COMMON</b><font face='Lucida Console'>(</font>Name, Parent, CheckFun<font face='Lucida Console'>)</font>                                                \
    <font color='#009900'>/* This is deliberately not 'explicit' to allow implicit conversion from object: */</font>           \
    <font color='#009900'>/* NOLINTNEXTLINE(google-explicit-constructor) */</font>                                             \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> object <font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> : Parent<font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font> <b>{</b>                                                           \
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_ptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#5555FF'>!</font><font color='#BB00BB'>check_</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>                                                              \
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>PYBIND11_OBJECT_CHECK_FAILED</font><font face='Lucida Console'>(</font>Name, m_ptr<font face='Lucida Console'>)</font>;                                      \
    <b>}</b>                                                                                             \
    <font color='#009900'>/* NOLINTNEXTLINE(google-explicit-constructor) */</font>                                             \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> : Parent<font face='Lucida Console'>(</font>std::move<font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>                                                     \
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_ptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#5555FF'>!</font><font color='#BB00BB'>check_</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>                                                              \
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>PYBIND11_OBJECT_CHECK_FAILED</font><font face='Lucida Console'>(</font>Name, m_ptr<font face='Lucida Console'>)</font>;                                      \
    <b>}</b>

<font color='#0000FF'>#define</font> PYBIND11_OBJECT_DEFAULT<font face='Lucida Console'>(</font>Name, Parent, CheckFun<font face='Lucida Console'>)</font>                                           \
    <b><a name='PYBIND11_OBJECT'></a>PYBIND11_OBJECT</b><font face='Lucida Console'>(</font>Name, Parent, CheckFun<font face='Lucida Console'>)</font>                                                       \
    <b><a name='Name'></a>Name</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font> <font color='#0000FF'>default</font>;

<font color='#009900'>/// \addtogroup pytypes
</font><font color='#009900'>/// @{
</font>
<font color='#009900'>/** \rst
    Wraps a Python iterator so that it can also be used as a C++ input iterator

    Caveat: copying an iterator does not (and cannot) clone the internal
    state of the Python iterable. This also applies to the post-increment
    operator. This iterator should only be used to retrieve the current
    value using ``operator*()``.
\endrst */</font>
<font color='#0000FF'>class</font> <b><a name='iterator'></a>iterator</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <font color='#0000FF'>using</font> iterator_category <font color='#5555FF'>=</font> std::input_iterator_tag;
    <font color='#0000FF'>using</font> difference_type <font color='#5555FF'>=</font> ssize_t;
    <font color='#0000FF'>using</font> value_type <font color='#5555FF'>=</font> handle;
    <font color='#0000FF'>using</font> reference <font color='#5555FF'>=</font> <font color='#0000FF'>const</font> handle; <font color='#009900'>// PR #3263
</font>    <font color='#0000FF'>using</font> pointer <font color='#5555FF'>=</font> <font color='#0000FF'>const</font> handle <font color='#5555FF'>*</font>;

    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>iterator, object, PyIter_Check<font face='Lucida Console'>)</font>

    iterator <font color='#5555FF'>&amp;</font><b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>advance</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
    <b>}</b>

    iterator <b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>auto</font> rv <font color='#5555FF'>=</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
        <font color='#BB00BB'>advance</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> rv;
    <b>}</b>

    <font color='#009900'>// NOLINTNEXTLINE(readability-const-return-type) // PR #3263
</font>    reference <b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>m_ptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#5555FF'>!</font>value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>auto</font> <font color='#5555FF'>&amp;</font>self <font color='#5555FF'>=</font> <font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font>iterator <font color='#5555FF'>&amp;</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#5555FF'>*</font><font color='#0000FF'>this</font><font face='Lucida Console'>)</font>;
            self.<font color='#BB00BB'>advance</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> value;
    <b>}</b>

    pointer <b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>operator</font><font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#5555FF'>&amp;</font>value;
    <b>}</b>

    <font color='#009900'>/** \rst
         The value which marks the end of the iteration. ``it == iterator::sentinel()``
         is equivalent to catching ``StopIteration`` in Python.

         .. code-block:: cpp

             void foo(py::iterator it) {
                 while (it != py::iterator::sentinel()) {
                    // use `*it`
                    ++it;
                 }
             }
    \endrst */</font>
    <font color='#0000FF'>static</font> iterator <b><a name='sentinel'></a>sentinel</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><b>}</b>; <b>}</b>

    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>=</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> iterator <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> iterator <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> a<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> b<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>friend</font> <font color='#0000FF'><u>bool</u></font> <b><a name='operator'></a>operator</b><font color='#5555FF'>!</font><font color='#5555FF'>=</font><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> iterator <font color='#5555FF'>&amp;</font>a, <font color='#0000FF'>const</font> iterator <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> a<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> b<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#0000FF'><u>void</u></font> <b><a name='advance'></a>advance</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        value <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyIter_Next</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>value.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

<font color='#0000FF'>private</font>:
    object value <font color='#5555FF'>=</font> <b>{</b><b>}</b>;
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='type'></a>type</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT'></a>PYBIND11_OBJECT</b><font face='Lucida Console'>(</font>type, object, PyType_Check<font face='Lucida Console'>)</font>

    <font color='#009900'>/// Return a type handle from a handle or an object
</font>    <font color='#0000FF'>static</font> handle <b><a name='handle_of'></a>handle_of</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> <font color='#BB00BB'>Py_TYPE</font><font face='Lucida Console'>(</font>h.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#009900'>/// Return a type object from a handle or an object
</font>    <font color='#0000FF'>static</font> type <b><a name='of'></a>of</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>type</font><font face='Lucida Console'>(</font>type::<font color='#BB00BB'>handle_of</font><font face='Lucida Console'>(</font>h<font face='Lucida Console'>)</font>, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#009900'>// Defined in pybind11/cast.h
</font>    <font color='#009900'>/// Convert C++ type to handle if previously registered. Does not convert
</font>    <font color='#009900'>/// standard types, like int, float. etc. yet.
</font>    <font color='#009900'>/// See https://github.com/pybind/pybind11/issues/2486
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> handle <b><a name='handle_of'></a>handle_of</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/// Convert C++ type to type if previously registered. Does not convert
</font>    <font color='#009900'>/// standard types, like int, float. etc. yet.
</font>    <font color='#009900'>/// See https://github.com/pybind/pybind11/issues/2486
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> type <b><a name='of'></a>of</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>type</font><font face='Lucida Console'>(</font>type::handle_of<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='iterable'></a>iterable</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>iterable, object, detail::PyIterable_Check<font face='Lucida Console'>)</font>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='bytes'></a>bytes</b>;

<font color='#0000FF'>class</font> <b><a name='str'></a>str</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>str, object, PYBIND11_STR_CHECK_FUN, raw_str<font face='Lucida Console'>)</font>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> SzType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>SzType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <b><a name='str'></a>str</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>c, <font color='#0000FF'>const</font> SzType <font color='#5555FF'>&amp;</font>n<font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>PyUnicode_FromStringAndSize<font face='Lucida Console'>(</font>c, ssize_t_cast<font face='Lucida Console'>(</font>n<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
                <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <b>}</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate string object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#009900'>// 'explicit' is explicitly omitted from the following constructors to allow implicit
</font>    <font color='#009900'>// conversion to py::str from C++ string-like objects
</font>    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='str'></a>str</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>c <font color='#5555FF'>=</font> "<font color='#CC0000'></font>"<font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PyUnicode_FromString<font face='Lucida Console'>(</font>c<font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
                <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <b>}</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate string object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='str'></a>str</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> std::string <font color='#5555FF'>&amp;</font>s<font face='Lucida Console'>)</font> : str<font face='Lucida Console'>(</font>s.data<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, s.size<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

<font color='#0000FF'>#ifdef</font> PYBIND11_HAS_STRING_VIEW
    <font color='#009900'>// enable_if is needed to avoid "ambiguous conversion" errors (see PR #3521).
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_same<font color='#5555FF'>&lt;</font>T, std::string_view<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='str'></a>str</b><font face='Lucida Console'>(</font>T s<font face='Lucida Console'>)</font> : str<font face='Lucida Console'>(</font>s.data<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, s.size<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

#    ifdef PYBIND11_HAS_U8STRING
    <font color='#009900'>// reinterpret_cast here is safe (C++20 guarantees char8_t has the same size/alignment as char)
</font>    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='str'></a>str</b><font face='Lucida Console'>(</font>std::u8string_view s<font face='Lucida Console'>)</font> : str<font face='Lucida Console'>(</font><font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>s.data<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, s.size<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
#    endif

<font color='#0000FF'>#endif</font>

    <font color='#0000FF'>explicit</font> <b><a name='str'></a>str</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> bytes <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font>;

    <font color='#009900'>/** \rst
        Return a string representation of the object. This is analogous to
        the ``str()`` function in Python.
    \endrst */</font>
    <font color='#0000FF'>explicit</font> <b><a name='str'></a>str</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>raw_str<font face='Lucida Console'>(</font>h.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> std::<b><a name='string'></a>string</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        object temp <font color='#5555FF'>=</font> <font color='#5555FF'>*</font><font color='#0000FF'>this</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyUnicode_Check</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            temp <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyUnicode_AsUTF8String</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>temp<font face='Lucida Console'>)</font> <b>{</b>
                <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <b>}</b>
        <b>}</b>
        <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>buffer <font color='#5555FF'>=</font> nullptr;
        ssize_t length <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyBytes_AsStringAndSize</font><font face='Lucida Console'>(</font>temp.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>buffer, <font color='#5555FF'>&amp;</font>length<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>buffer, <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font><font face='Lucida Console'>)</font> length<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font>... Args<font color='#5555FF'>&gt;</font>
    str <b><a name='format'></a>format</b><font face='Lucida Console'>(</font>Args <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>...args<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>attr</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>format</font>"<font face='Lucida Console'>)</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>Args<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>args<font face='Lucida Console'>)</font>...<font face='Lucida Console'>)</font>;
    <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#009900'>/// Return string representation -- always returns a new reference, even if already a str
</font>    <font color='#0000FF'>static</font> PyObject <font color='#5555FF'>*</font><b><a name='raw_str'></a>raw_str</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>op<font face='Lucida Console'>)</font> <b>{</b>
        PyObject <font color='#5555FF'>*</font>str_value <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_Str</font><font face='Lucida Console'>(</font>op<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> str_value;
    <b>}</b>
<b>}</b>;
<font color='#009900'>/// @} pytypes
</font>
<font color='#0000FF'>inline</font> <font color='#0000FF'>namespace</font> literals <b>{</b>
<font color='#009900'>/** \rst
    String literal version of `str`
 \endrst */</font>
<font color='#0000FF'>inline</font> str
<font color='#0000FF'>#if</font> <font color='#5555FF'>!</font>defined<font face='Lucida Console'>(</font>__clang__<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> defined<font face='Lucida Console'>(</font>__GNUC__<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> __GNUC__ <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>
<b><a name='operator'></a>operator</b>"<font color='#CC0000'></font>" _s <font color='#009900'>// gcc 4.8.5 insists on having a space (hard error).
</font><font color='#0000FF'>#else</font>
<b><a name='operator'></a>operator</b>"<font color='#CC0000'></font>"_s <font color='#009900'>// clang 17 generates a deprecation warning if there is a space.
</font><font color='#0000FF'>#endif</font>
    <font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>s, <font color='#0000FF'><u>size_t</u></font> size<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b>s, size<b>}</b>;
<b>}</b>
<b>}</b> <font color='#009900'>// namespace literals
</font>
<font color='#009900'>/// \addtogroup pytypes
</font><font color='#009900'>/// @{
</font><font color='#0000FF'>class</font> <b><a name='bytes'></a>bytes</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT'></a>PYBIND11_OBJECT</b><font face='Lucida Console'>(</font>bytes, object, PYBIND11_BYTES_CHECK<font face='Lucida Console'>)</font>

    <font color='#009900'>// Allow implicit conversion:
</font>    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='bytes'></a>bytes</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>c <font color='#5555FF'>=</font> "<font color='#CC0000'></font>"<font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PYBIND11_BYTES_FROM_STRING<font face='Lucida Console'>(</font>c<font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate bytes object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> SzType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>SzType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <b><a name='bytes'></a>bytes</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>c, <font color='#0000FF'>const</font> SzType <font color='#5555FF'>&amp;</font>n<font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>PYBIND11_BYTES_FROM_STRING_AND_SIZE<font face='Lucida Console'>(</font>c, ssize_t_cast<font face='Lucida Console'>(</font>n<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate bytes object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#009900'>// Allow implicit conversion:
</font>    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='bytes'></a>bytes</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> std::string <font color='#5555FF'>&amp;</font>s<font face='Lucida Console'>)</font> : bytes<font face='Lucida Console'>(</font>s.data<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, s.size<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#0000FF'>explicit</font> <b><a name='bytes'></a>bytes</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> pybind11::str <font color='#5555FF'>&amp;</font>s<font face='Lucida Console'>)</font>;

    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> std::<b><a name='string'></a>string</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> string_op<font color='#5555FF'>&lt;</font>std::string<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>

<font color='#0000FF'>#ifdef</font> PYBIND11_HAS_STRING_VIEW
    <font color='#009900'>// enable_if is needed to avoid "ambiguous conversion" errors (see PR #3521).
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_same<font color='#5555FF'>&lt;</font>T, std::string_view<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='bytes'></a>bytes</b><font face='Lucida Console'>(</font>T s<font face='Lucida Console'>)</font> : bytes<font face='Lucida Console'>(</font>s.data<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, s.size<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#009900'>// Obtain a string view that views the current `bytes` buffer value.  Note that this is only
</font>    <font color='#009900'>// valid so long as the `bytes` instance remains alive and so generally should not outlive the
</font>    <font color='#009900'>// lifetime of the `bytes` instance.
</font>    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> std::<b><a name='string_view'></a>string_view</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> string_op<font color='#5555FF'>&lt;</font>std::string_view<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
<font color='#0000FF'>#endif</font>
<font color='#0000FF'>private</font>:
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    T <b><a name='string_op'></a>string_op</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>buffer <font color='#5555FF'>=</font> nullptr;
        ssize_t length <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyBytes_AsStringAndSize</font><font face='Lucida Console'>(</font>m_ptr, <font color='#5555FF'>&amp;</font>buffer, <font color='#5555FF'>&amp;</font>length<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> <b>{</b>buffer, <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>size_t</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>length<font face='Lucida Console'>)</font><b>}</b>;
    <b>}</b>
<b>}</b>;
<font color='#009900'>// Note: breathe &gt;= 4.17.0 will fail to build docs if the below two constructors
</font><font color='#009900'>// are included in the doxygen group; close here and reopen after as a workaround
</font><font color='#009900'>/// @} pytypes
</font>
<font color='#0000FF'>inline</font> bytes::<b><a name='bytes'></a>bytes</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> pybind11::str <font color='#5555FF'>&amp;</font>s<font face='Lucida Console'>)</font> <b>{</b>
    object temp <font color='#5555FF'>=</font> s;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyUnicode_Check</font><font face='Lucida Console'>(</font>s.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        temp <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyUnicode_AsUTF8String</font><font face='Lucida Console'>(</font>s.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>temp<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>buffer <font color='#5555FF'>=</font> nullptr;
    ssize_t length <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyBytes_AsStringAndSize</font><font face='Lucida Console'>(</font>temp.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>buffer, <font color='#5555FF'>&amp;</font>length<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>auto</font> obj <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PYBIND11_BYTES_FROM_STRING_AND_SIZE</font><font face='Lucida Console'>(</font>buffer, length<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>obj<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate bytes object!</font>"<font face='Lucida Console'>)</font>;
    <b>}</b>
    m_ptr <font color='#5555FF'>=</font> obj.<font color='#BB00BB'>release</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>inline</font> str::<b><a name='str'></a>str</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> bytes <font color='#5555FF'>&amp;</font>b<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>buffer <font color='#5555FF'>=</font> nullptr;
    ssize_t length <font color='#5555FF'>=</font> <font color='#979000'>0</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyBytes_AsStringAndSize</font><font face='Lucida Console'>(</font>b.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#5555FF'>&amp;</font>buffer, <font color='#5555FF'>&amp;</font>length<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>auto</font> obj <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyUnicode_FromStringAndSize</font><font face='Lucida Console'>(</font>buffer, length<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>obj<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate string object!</font>"<font face='Lucida Console'>)</font>;
    <b>}</b>
    m_ptr <font color='#5555FF'>=</font> obj.<font color='#BB00BB'>release</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#009900'>/// \addtogroup pytypes
</font><font color='#009900'>/// @{
</font><font color='#0000FF'>class</font> <b><a name='bytearray'></a>bytearray</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>bytearray, object, PyByteArray_Check, PyByteArray_FromObject<font face='Lucida Console'>)</font>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> SzType, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>SzType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <b><a name='bytearray'></a>bytearray</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>c, <font color='#0000FF'>const</font> SzType <font color='#5555FF'>&amp;</font>n<font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>PyByteArray_FromStringAndSize<font face='Lucida Console'>(</font>c, ssize_t_cast<font face='Lucida Console'>(</font>n<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate bytearray object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <b><a name='bytearray'></a>bytearray</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : bytearray<font face='Lucida Console'>(</font>"<font color='#CC0000'></font>", <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#0000FF'>explicit</font> <b><a name='bytearray'></a>bytearray</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> std::string <font color='#5555FF'>&amp;</font>s<font face='Lucida Console'>)</font> : bytearray<font face='Lucida Console'>(</font>s.data<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, s.size<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#0000FF'><u>size_t</u></font> <b><a name='size'></a>size</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>size_t</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyByteArray_Size</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>

    <font color='#0000FF'>explicit</font> <b><a name='operator'></a>operator</b> std::<b><a name='string'></a>string</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>buffer <font color='#5555FF'>=</font> <font color='#BB00BB'>PyByteArray_AS_STRING</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
        ssize_t size <font color='#5555FF'>=</font> <font color='#BB00BB'>PyByteArray_GET_SIZE</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> std::<font color='#BB00BB'>string</font><font face='Lucida Console'>(</font>buffer, <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>size_t</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>size<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>;
<font color='#009900'>// Note: breathe &gt;= 4.17.0 will fail to build docs if the below two constructors
</font><font color='#009900'>// are included in the doxygen group; close here and reopen after as a workaround
</font><font color='#009900'>/// @} pytypes
</font>
<font color='#009900'>/// \addtogroup pytypes
</font><font color='#009900'>/// @{
</font><font color='#0000FF'>class</font> <b><a name='none'></a>none</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT'></a>PYBIND11_OBJECT</b><font face='Lucida Console'>(</font>none, object, detail::PyNone_Check<font face='Lucida Console'>)</font>
    <b><a name='none'></a>none</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>Py_None, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='ellipsis'></a>ellipsis</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT'></a>PYBIND11_OBJECT</b><font face='Lucida Console'>(</font>ellipsis, object, detail::PyEllipsis_Check<font face='Lucida Console'>)</font>
    <b><a name='ellipsis'></a>ellipsis</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>Py_Ellipsis, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='bool_'></a>bool_</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>bool_, object, PyBool_Check, raw_bool<font face='Lucida Console'>)</font>
    <b><a name='bool_'></a>bool_</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>Py_False, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
    <font color='#009900'>// Allow implicit conversion from and to `bool`:
</font>    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='bool_'></a>bool_</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>bool</u></font> value<font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>value ? Py_True : Py_False, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> <font color='#0000FF'><u>bool</u></font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font>m_ptr <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyLong_AsLong</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#009900'>/// Return the truth value of an object -- always returns a new reference
</font>    <font color='#0000FF'>static</font> PyObject <font color='#5555FF'>*</font><b><a name='raw_bool'></a>raw_bool</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>op<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>const</font> <font color='#0000FF'>auto</font> value <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_IsTrue</font><font face='Lucida Console'>(</font>op<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>value <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>return</font> nullptr;
        <b>}</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font>value <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> ? Py_True : Py_False<font face='Lucida Console'>)</font>.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>;

<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>
<font color='#009900'>// Converts a value to the given unsigned type.  If an error occurs, you get back (Unsigned) -1;
</font><font color='#009900'>// otherwise you get back the unsigned long or unsigned long long value cast to (Unsigned).
</font><font color='#009900'>// (The distinction is critically important when casting a returned -1 error value to some other
</font><font color='#009900'>// unsigned type: (A)-1 != (B)-1 when A and B are unsigned types of different sizes).
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> Unsigned<font color='#5555FF'>&gt;</font>
Unsigned <b><a name='as_unsigned'></a>as_unsigned</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#0000FF'>sizeof</font><font face='Lucida Console'>(</font>Unsigned<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> <font color='#0000FF'>sizeof</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>unsigned</u></font> <font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'><u>unsigned</u></font> <font color='#0000FF'><u>long</u></font> v <font color='#5555FF'>=</font> <font color='#BB00BB'>PyLong_AsUnsignedLong</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> v <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>unsigned</u></font> <font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font><font color='#979000'>1</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> ? <font face='Lucida Console'>(</font>Unsigned<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font><font color='#979000'>1</font> : <font face='Lucida Console'>(</font>Unsigned<font face='Lucida Console'>)</font> v;
    <b>}</b>
    <font color='#0000FF'><u>unsigned</u></font> <font color='#0000FF'><u>long</u></font> <font color='#0000FF'><u>long</u></font> v <font color='#5555FF'>=</font> <font color='#BB00BB'>PyLong_AsUnsignedLongLong</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>return</font> v <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>unsigned</u></font> <font color='#0000FF'><u>long</u></font> <font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font><font color='#979000'>1</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> ? <font face='Lucida Console'>(</font>Unsigned<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font><font color='#979000'>1</font> : <font face='Lucida Console'>(</font>Unsigned<font face='Lucida Console'>)</font> v;
<b>}</b>
<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>

<font color='#0000FF'>class</font> <b><a name='int_'></a>int_</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>int_, object, PYBIND11_LONG_CHECK, PyNumber_Long<font face='Lucida Console'>)</font>
    <b><a name='int_'></a>int_</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PyLong_FromLong<font face='Lucida Console'>(</font><font color='#979000'>0</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
    <font color='#009900'>// Allow implicit conversion from C++ integral types:
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='int_'></a>int_</b><font face='Lucida Console'>(</font>T value<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#0000FF'>sizeof</font><font face='Lucida Console'>(</font>T<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> <font color='#0000FF'>sizeof</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>std::is_signed<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value<font face='Lucida Console'>)</font> <b>{</b>
                m_ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyLong_FromLong</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> value<font face='Lucida Console'>)</font>;
            <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                m_ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyLong_FromUnsignedLong</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>unsigned</u></font> <font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> value<font face='Lucida Console'>)</font>;
            <b>}</b>
        <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>std::is_signed<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value<font face='Lucida Console'>)</font> <b>{</b>
                m_ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyLong_FromLongLong</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font> <font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> value<font face='Lucida Console'>)</font>;
            <b>}</b> <font color='#0000FF'>else</font> <b>{</b>
                m_ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyLong_FromUnsignedLongLong</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>unsigned</u></font> <font color='#0000FF'><u>long</u></font> <font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> value<font face='Lucida Console'>)</font>;
            <b>}</b>
        <b>}</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate int object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> <b><a name='T'></a>T</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> std::is_unsigned<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value  ? detail::as_unsigned<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>
               : <font color='#0000FF'>sizeof</font><font face='Lucida Console'>(</font>T<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> <font color='#0000FF'>sizeof</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>long</u></font><font face='Lucida Console'>)</font> ? <font face='Lucida Console'>(</font>T<font face='Lucida Console'>)</font> <font color='#BB00BB'>PyLong_AsLong</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>
                                           : <font face='Lucida Console'>(</font>T<font face='Lucida Console'>)</font> <font color='#BB00BB'>PYBIND11_LONG_AS_LONGLONG</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='float_'></a>float_</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>float_, object, PyFloat_Check, PyNumber_Float<font face='Lucida Console'>)</font>
    <font color='#009900'>// Allow implicit conversion from float/double:
</font>    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='float_'></a>float_</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>float</u></font> value<font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PyFloat_FromDouble<font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>double</u></font><font face='Lucida Console'>)</font> value<font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate float object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='float_'></a>float_</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>double</u></font> value <font color='#5555FF'>=</font> .<font color='#979000'>0</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PyFloat_FromDouble<font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>double</u></font><font face='Lucida Console'>)</font> value<font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate float object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> <font color='#0000FF'><u>float</u></font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>float</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>PyFloat_AsDouble</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#009900'>// NOLINTNEXTLINE(google-explicit-constructor)
</font>    <b><a name='operator'></a>operator</b> <font color='#0000FF'><u>double</u></font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>double</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>PyFloat_AsDouble</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='weakref'></a>weakref</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT_DEFAULT'></a>PYBIND11_OBJECT_CVT_DEFAULT</b><font face='Lucida Console'>(</font>weakref, object, PyWeakref_Check, raw_weakref<font face='Lucida Console'>)</font>
    <font color='#0000FF'>explicit</font> <b><a name='weakref'></a>weakref</b><font face='Lucida Console'>(</font>handle obj, handle callback <font color='#5555FF'>=</font> <b>{</b><b>}</b><font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>PyWeakref_NewRef<font face='Lucida Console'>(</font>obj.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, callback.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
                <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <b>}</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate weak reference!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#0000FF'>static</font> PyObject <font color='#5555FF'>*</font><b><a name='raw_weakref'></a>raw_weakref</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>PyWeakref_NewRef</font><font face='Lucida Console'>(</font>o, nullptr<font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='slice'></a>slice</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>slice, object, PySlice_Check<font face='Lucida Console'>)</font>
    <b><a name='slice'></a>slice</b><font face='Lucida Console'>(</font>handle start, handle stop, handle step<font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>PySlice_New<font face='Lucida Console'>(</font>start.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, stop.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, step.ptr<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate slice object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

<font color='#0000FF'>#ifdef</font> PYBIND11_HAS_OPTIONAL
    <b><a name='slice'></a>slice</b><font face='Lucida Console'>(</font>std::optional<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> start, std::optional<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> stop, std::optional<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> step<font face='Lucida Console'>)</font>
        : slice<font face='Lucida Console'>(</font>index_to_object<font face='Lucida Console'>(</font>start<font face='Lucida Console'>)</font>, index_to_object<font face='Lucida Console'>(</font>stop<font face='Lucida Console'>)</font>, index_to_object<font face='Lucida Console'>(</font>step<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
<font color='#0000FF'>#else</font>
    <b><a name='slice'></a>slice</b><font face='Lucida Console'>(</font>ssize_t start_, ssize_t stop_, ssize_t step_<font face='Lucida Console'>)</font>
        : slice<font face='Lucida Console'>(</font>int_<font face='Lucida Console'>(</font>start_<font face='Lucida Console'>)</font>, int_<font face='Lucida Console'>(</font>stop_<font face='Lucida Console'>)</font>, int_<font face='Lucida Console'>(</font>step_<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>
<font color='#0000FF'>#endif</font>

    <font color='#0000FF'><u>bool</u></font>
    <b><a name='compute'></a>compute</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font> length, <font color='#0000FF'><u>size_t</u></font> <font color='#5555FF'>*</font>start, <font color='#0000FF'><u>size_t</u></font> <font color='#5555FF'>*</font>stop, <font color='#0000FF'><u>size_t</u></font> <font color='#5555FF'>*</font>step, <font color='#0000FF'><u>size_t</u></font> <font color='#5555FF'>*</font>slicelength<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>PySlice_GetIndicesEx</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>PYBIND11_SLICE_OBJECT <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> m_ptr,
                                    <font face='Lucida Console'>(</font>ssize_t<font face='Lucida Console'>)</font> length,
                                    <font face='Lucida Console'>(</font>ssize_t <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> start,
                                    <font face='Lucida Console'>(</font>ssize_t <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> stop,
                                    <font face='Lucida Console'>(</font>ssize_t <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> step,
                                    <font face='Lucida Console'>(</font>ssize_t <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> slicelength<font face='Lucida Console'>)</font>
               <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>;
    <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='compute'></a>compute</b><font face='Lucida Console'>(</font>
        ssize_t length, ssize_t <font color='#5555FF'>*</font>start, ssize_t <font color='#5555FF'>*</font>stop, ssize_t <font color='#5555FF'>*</font>step, ssize_t <font color='#5555FF'>*</font>slicelength<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>PySlice_GetIndicesEx</font><font face='Lucida Console'>(</font>
                   <font face='Lucida Console'>(</font>PYBIND11_SLICE_OBJECT <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> m_ptr, length, start, stop, step, slicelength<font face='Lucida Console'>)</font>
               <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>;
    <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> object <b><a name='index_to_object'></a>index_to_object</b><font face='Lucida Console'>(</font>T index<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> index ? <font color='#BB00BB'>object</font><font face='Lucida Console'>(</font><font color='#BB00BB'>int_</font><font face='Lucida Console'>(</font><font color='#5555FF'>*</font>index<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> : <font color='#BB00BB'>object</font><font face='Lucida Console'>(</font><font color='#BB00BB'>none</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='capsule'></a>capsule</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>capsule, object, PyCapsule_CheckExact<font face='Lucida Console'>)</font>
    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Use reinterpret_borrow&lt;capsule&gt;() or reinterpret_steal&lt;capsule&gt;()</font>"<font face='Lucida Console'>)</font>
    <b><a name='capsule'></a>capsule</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>ptr, <font color='#0000FF'><u>bool</u></font> is_borrowed<font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>is_borrowed ? object<font face='Lucida Console'>(</font>ptr, borrowed_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>ptr, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#0000FF'>explicit</font> <b><a name='capsule'></a>capsule</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>value,
                     <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name <font color='#5555FF'>=</font> nullptr,
                     PyCapsule_Destructor destructor <font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>PyCapsule_New<font face='Lucida Console'>(</font><font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font>, name, destructor<font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <b><a name='PYBIND11_DEPRECATED'></a>PYBIND11_DEPRECATED</b><font face='Lucida Console'>(</font>"<font color='#CC0000'>Please use the ctor with value, name, destructor args</font>"<font face='Lucida Console'>)</font>
    <b><a name='capsule'></a>capsule</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>value, PyCapsule_Destructor destructor<font face='Lucida Console'>)</font>
        : object<font face='Lucida Console'>(</font>PyCapsule_New<font face='Lucida Console'>(</font><font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font>, nullptr, destructor<font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#009900'>/// Capsule name is nullptr.
</font>    <b><a name='capsule'></a>capsule</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>value, <font color='#0000FF'><u>void</u></font> <font face='Lucida Console'>(</font><font color='#5555FF'>*</font>destructor<font face='Lucida Console'>)</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>initialize_with_void_ptr_destructor</font><font face='Lucida Console'>(</font>value, nullptr, destructor<font face='Lucida Console'>)</font>;
    <b>}</b>

    <b><a name='capsule'></a>capsule</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>value, <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name, <font color='#0000FF'><u>void</u></font> <font face='Lucida Console'>(</font><font color='#5555FF'>*</font>destructor<font face='Lucida Console'>)</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>initialize_with_void_ptr_destructor</font><font face='Lucida Console'>(</font>value, name, destructor<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>explicit</font> <b><a name='capsule'></a>capsule</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font face='Lucida Console'>(</font><font color='#5555FF'>*</font>destructor<font face='Lucida Console'>)</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        m_ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyCapsule_New</font><font face='Lucida Console'>(</font><font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>destructor<font face='Lucida Console'>)</font>, nullptr, []<font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name <font color='#5555FF'>=</font> <font color='#BB00BB'>get_name_in_error_scope</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
            <font color='#0000FF'>auto</font> destructor <font color='#5555FF'>=</font> <font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font face='Lucida Console'>(</font><font color='#5555FF'>*</font><font face='Lucida Console'>)</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyCapsule_GetPointer</font><font face='Lucida Console'>(</font>o, name<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>destructor <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
                <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <b>}</b>
            <font color='#BB00BB'>destructor</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b><font face='Lucida Console'>)</font>;

        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <b><a name='operator'></a>operator</b> T <font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#009900'>// NOLINT(google-explicit-constructor)
</font>        <font color='#0000FF'>return</font> get_pointer<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#009900'>/// Get the pointer the capsule holds.
</font>    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T <font color='#5555FF'>=</font> <font color='#0000FF'><u>void</u></font><font color='#5555FF'>&gt;</font>
    T <font color='#5555FF'>*</font><b><a name='get_pointer'></a>get_pointer</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>const</font> <font color='#0000FF'>auto</font> <font color='#5555FF'>*</font>name <font color='#5555FF'>=</font> <font color='#0000FF'>this</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>name</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        T <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font>T <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyCapsule_GetPointer</font><font face='Lucida Console'>(</font>m_ptr, name<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> result;
    <b>}</b>

    <font color='#009900'>/// Replaces a capsule's pointer *without* calling the destructor on the existing one.
</font>    <font color='#0000FF'><u>void</u></font> <b><a name='set_pointer'></a>set_pointer</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>value<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyCapsule_SetPointer</font><font face='Lucida Console'>(</font>m_ptr, <font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><b><a name='name'></a>name</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name <font color='#5555FF'>=</font> <font color='#BB00BB'>PyCapsule_GetName</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>name <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> name;
    <b>}</b>

    <font color='#009900'>/// Replaces a capsule's name *without* calling the destructor on the existing one.
</font>    <font color='#0000FF'><u>void</u></font> <b><a name='set_name'></a>set_name</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>new_name<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyCapsule_SetName</font><font face='Lucida Console'>(</font>m_ptr, new_name<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#0000FF'>static</font> <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><b><a name='get_name_in_error_scope'></a>get_name_in_error_scope</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b>
        error_scope error_guard;

        <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name <font color='#5555FF'>=</font> <font color='#BB00BB'>PyCapsule_GetName</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>name <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#009900'>// write out and consume error raised by call to PyCapsule_GetName
</font>            <font color='#BB00BB'>PyErr_WriteUnraisable</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
        <b>}</b>

        <font color='#0000FF'>return</font> name;
    <b>}</b>

    <font color='#0000FF'><u>void</u></font> <b><a name='initialize_with_void_ptr_destructor'></a>initialize_with_void_ptr_destructor</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>value,
                                             <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name,
                                             <font color='#0000FF'><u>void</u></font> <font face='Lucida Console'>(</font><font color='#5555FF'>*</font>destructor<font face='Lucida Console'>)</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        m_ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyCapsule_New</font><font face='Lucida Console'>(</font><font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>value<font face='Lucida Console'>)</font>, name, []<font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>o<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#009900'>// guard if destructor called while err indicator is set
</font>            error_scope error_guard;
            <font color='#0000FF'>auto</font> destructor <font color='#5555FF'>=</font> <font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font face='Lucida Console'>(</font><font color='#5555FF'>*</font><font face='Lucida Console'>)</font><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font face='Lucida Console'>)</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PyCapsule_GetContext</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>destructor <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyErr_Occurred</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
                <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <b>}</b>
            <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>name <font color='#5555FF'>=</font> <font color='#BB00BB'>get_name_in_error_scope</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font>;
            <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyCapsule_GetPointer</font><font face='Lucida Console'>(</font>o, name<font face='Lucida Console'>)</font>;
            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ptr <font color='#5555FF'>=</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
                <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
            <b>}</b>

            <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>destructor <font color='#5555FF'>!</font><font color='#5555FF'>=</font> nullptr<font face='Lucida Console'>)</font> <b>{</b>
                <font color='#BB00BB'>destructor</font><font face='Lucida Console'>(</font>ptr<font face='Lucida Console'>)</font>;
            <b>}</b>
        <b>}</b><font face='Lucida Console'>)</font>;

        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr <font color='#5555FF'>|</font><font color='#5555FF'>|</font> <font color='#BB00BB'>PyCapsule_SetContext</font><font face='Lucida Console'>(</font>m_ptr, <font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>destructor<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='tuple'></a>tuple</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>tuple, object, PyTuple_Check, PySequence_Tuple<font face='Lucida Console'>)</font>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> SzType <font color='#5555FF'>=</font> ssize_t,
              detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>SzType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// Some compilers generate link errors when using `const SzType &amp;` here:
</font>    <font color='#0000FF'>explicit</font> <b><a name='tuple'></a>tuple</b><font face='Lucida Console'>(</font>SzType size <font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PyTuple_New<font face='Lucida Console'>(</font>ssize_t_cast<font face='Lucida Console'>(</font>size<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate tuple object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'><u>size_t</u></font> <b><a name='size'></a>size</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>PyTuple_Size</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='empty'></a>empty</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; <b>}</b>
    detail::tuple_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font> index<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, index<b>}</b>; <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>detail::is_pyobject<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    detail::item_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> object::<font color='#0000FF'>operator</font>[]<font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    detail::tuple_iterator <b><a name='begin'></a>begin</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, <font color='#979000'>0</font><b>}</b>; <b>}</b>
    detail::tuple_iterator <b><a name='end'></a>end</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, <font color='#BB00BB'>PyTuple_GET_SIZE</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><b>}</b>; <b>}</b>
<b>}</b>;

<font color='#009900'>// We need to put this into a separate function because the Intel compiler
</font><font color='#009900'>// fails to compile enable_if_t&lt;all_of&lt;is_keyword_or_ds&lt;Args&gt;...&gt;::value&gt; part below
</font><font color='#009900'>// (tested with ICC 2021.1 Beta 20200827).
</font><font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font>... Args<font color='#5555FF'>&gt;</font>
constexpr <font color='#0000FF'><u>bool</u></font> <b><a name='args_are_all_keyword_or_ds'></a>args_are_all_keyword_or_ds</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'>return</font> detail::all_of<font color='#5555FF'>&lt;</font>detail::is_keyword_or_ds<font color='#5555FF'>&lt;</font>Args<font color='#5555FF'>&gt;</font>...<font color='#5555FF'>&gt;</font>::value;
<b>}</b>

<font color='#0000FF'>class</font> <b><a name='dict'></a>dict</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>dict, object, PyDict_Check, raw_dict<font face='Lucida Console'>)</font>
    <b><a name='dict'></a>dict</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PyDict_New<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate dict object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font>... Args,
              <font color='#0000FF'>typename</font> <font color='#5555FF'>=</font> detail::enable_if_t<font color='#5555FF'>&lt;</font>args_are_all_keyword_or_ds<font color='#5555FF'>&lt;</font>Args...<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font color='#5555FF'>&gt;</font>,
              <font color='#009900'>// MSVC workaround: it can't compile an out-of-line definition, so defer the
</font>              <font color='#009900'>// collector
</font>              <font color='#0000FF'>typename</font> collector <font color='#5555FF'>=</font> detail::deferred_t<font color='#5555FF'>&lt;</font>detail::unpacking_collector<font color='#5555FF'>&lt;</font><font color='#5555FF'>&gt;</font>, Args...<font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>explicit</font> <b><a name='dict'></a>dict</b><font face='Lucida Console'>(</font>Args <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>...args<font face='Lucida Console'>)</font> : dict<font face='Lucida Console'>(</font>collector<font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>Args<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>args<font face='Lucida Console'>)</font>...<font face='Lucida Console'>)</font>.kwargs<font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b><b>}</b>

    <font color='#0000FF'><u>size_t</u></font> <b><a name='size'></a>size</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>PyDict_Size</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='empty'></a>empty</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; <b>}</b>
    detail::dict_iterator <b><a name='begin'></a>begin</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, <font color='#979000'>0</font><b>}</b>; <b>}</b>
    detail::dict_iterator <b><a name='end'></a>end</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><b>}</b>; <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='clear'></a>clear</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#009900'>/* py-non-const */</font> <b>{</b> <font color='#BB00BB'>PyDict_Clear</font><font face='Lucida Console'>(</font><font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>bool</u></font> <b><a name='contains'></a>contains</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>auto</font> result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyDict_Contains</font><font face='Lucida Console'>(</font>m_ptr, detail::<font color='#BB00BB'>object_or_cast</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>result <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> result <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>1</font>;
    <b>}</b>

<font color='#0000FF'>private</font>:
    <font color='#009900'>/// Call the `dict` Python type -- always returns a new reference
</font>    <font color='#0000FF'>static</font> PyObject <font color='#5555FF'>*</font><b><a name='raw_dict'></a>raw_dict</b><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font>op<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyDict_Check</font><font face='Lucida Console'>(</font>op<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>return</font> <font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font>op<font face='Lucida Console'>)</font>.<font color='#BB00BB'>inc_ref</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>PyObject_CallFunctionObjArgs</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>PyObject <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font>PyDict_Type, op, nullptr<font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='sequence'></a>sequence</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>sequence, object, PySequence_Check<font face='Lucida Console'>)</font>
    <font color='#0000FF'><u>size_t</u></font> <b><a name='size'></a>size</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        ssize_t result <font color='#5555FF'>=</font> <font color='#BB00BB'>PySequence_Size</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>result <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font><font face='Lucida Console'>)</font> result;
    <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='empty'></a>empty</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; <b>}</b>
    detail::sequence_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font> index<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, index<b>}</b>; <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>detail::is_pyobject<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    detail::item_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> object::<font color='#0000FF'>operator</font>[]<font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    detail::sequence_iterator <b><a name='begin'></a>begin</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, <font color='#979000'>0</font><b>}</b>; <b>}</b>
    detail::sequence_iterator <b><a name='end'></a>end</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, <font color='#BB00BB'>PySequence_Size</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><b>}</b>; <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='list'></a>list</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>list, object, PyList_Check, PySequence_List<font face='Lucida Console'>)</font>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> SzType <font color='#5555FF'>=</font> ssize_t,
              detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>SzType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#009900'>// Some compilers generate link errors when using `const SzType &amp;` here:
</font>    <font color='#0000FF'>explicit</font> <b><a name='list'></a>list</b><font face='Lucida Console'>(</font>SzType size <font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> : object<font face='Lucida Console'>(</font>PyList_New<font face='Lucida Console'>(</font>ssize_t_cast<font face='Lucida Console'>(</font>size<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate list object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'><u>size_t</u></font> <b><a name='size'></a>size</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>PyList_Size</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='empty'></a>empty</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; <b>}</b>
    detail::list_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font> index<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, index<b>}</b>; <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T, detail::enable_if_t<font color='#5555FF'>&lt;</font>detail::is_pyobject<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    detail::item_accessor <b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>o<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>return</font> object::<font color='#0000FF'>operator</font>[]<font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>o<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    detail::list_iterator <b><a name='begin'></a>begin</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, <font color='#979000'>0</font><b>}</b>; <b>}</b>
    detail::list_iterator <b><a name='end'></a>end</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <b>{</b><font color='#5555FF'>*</font><font color='#0000FF'>this</font>, <font color='#BB00BB'>PyList_GET_SIZE</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><b>}</b>; <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>void</u></font> <b><a name='append'></a>append</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>val<font face='Lucida Console'>)</font> <font color='#009900'>/* py-non-const */</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyList_Append</font><font face='Lucida Console'>(</font>m_ptr, detail::<font color='#BB00BB'>object_or_cast</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>val<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> IdxType,
              <font color='#0000FF'>typename</font> ValType,
              detail::enable_if_t<font color='#5555FF'>&lt;</font>std::is_integral<font color='#5555FF'>&lt;</font>IdxType<font color='#5555FF'>&gt;</font>::value, <font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font> <font color='#5555FF'>=</font> <font color='#979000'>0</font><font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>void</u></font> <b><a name='insert'></a>insert</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> IdxType <font color='#5555FF'>&amp;</font>index, ValType <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>val<font face='Lucida Console'>)</font> <font color='#009900'>/* py-non-const */</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyList_Insert</font><font face='Lucida Console'>(</font>m_ptr,
                          <font color='#BB00BB'>ssize_t_cast</font><font face='Lucida Console'>(</font>index<font face='Lucida Console'>)</font>,
                          detail::<font color='#BB00BB'>object_or_cast</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>ValType<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>val<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>
            <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='args'></a>args</b> : <font color='#0000FF'>public</font> tuple <b>{</b>
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>args, tuple, PyTuple_Check<font face='Lucida Console'>)</font>
<b>}</b>;
<font color='#0000FF'>class</font> <b><a name='kwargs'></a>kwargs</b> : <font color='#0000FF'>public</font> dict <b>{</b>
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>kwargs, dict, PyDict_Check<font face='Lucida Console'>)</font>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='anyset'></a>anyset</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT'></a>PYBIND11_OBJECT</b><font face='Lucida Console'>(</font>anyset, object, PyAnySet_Check<font face='Lucida Console'>)</font>
    <font color='#0000FF'><u>size_t</u></font> <b><a name='size'></a>size</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>size_t</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>PySet_Size</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='empty'></a>empty</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>; <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>bool</u></font> <b><a name='contains'></a>contains</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>val<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'>auto</font> result <font color='#5555FF'>=</font> <font color='#BB00BB'>PySet_Contains</font><font face='Lucida Console'>(</font>m_ptr, detail::<font color='#BB00BB'>object_or_cast</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>val<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>result <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> result <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>1</font>;
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='set'></a>set</b> : <font color='#0000FF'>public</font> anyset <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>set, anyset, PySet_Check, PySet_New<font face='Lucida Console'>)</font>
    <b><a name='set'></a>set</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> : anyset<font face='Lucida Console'>(</font>PySet_New<font face='Lucida Console'>(</font>nullptr<font face='Lucida Console'>)</font>, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate set object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'><u>bool</u></font> <b><a name='add'></a>add</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>val<font face='Lucida Console'>)</font> <font color='#009900'>/* py-non-const */</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>PySet_Add</font><font face='Lucida Console'>(</font>m_ptr, detail::<font color='#BB00BB'>object_or_cast</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>val<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>;
    <b>}</b>
    <font color='#0000FF'><u>void</u></font> <b><a name='clear'></a>clear</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#009900'>/* py-non-const */</font> <b>{</b> <font color='#BB00BB'>PySet_Clear</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='frozenset'></a>frozenset</b> : <font color='#0000FF'>public</font> anyset <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>frozenset, anyset, PyFrozenSet_Check, PyFrozenSet_New<font face='Lucida Console'>)</font>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='function'></a>function</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>function, object, PyCallable_Check<font face='Lucida Console'>)</font>
    handle <b><a name='cpp_function'></a>cpp_function</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        handle fun <font color='#5555FF'>=</font> detail::<font color='#BB00BB'>get_function</font><font face='Lucida Console'>(</font>m_ptr<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>fun <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> <font color='#BB00BB'>PyCFunction_Check</font><font face='Lucida Console'>(</font>fun.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>return</font> fun;
        <b>}</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>handle</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'><u>bool</u></font> <b><a name='is_cpp_function'></a>is_cpp_function</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b> <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>bool</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>cpp_function</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>; <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='staticmethod'></a>staticmethod</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>staticmethod, object, detail::PyStaticMethod_Check, PyStaticMethod_New<font face='Lucida Console'>)</font>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='buffer'></a>buffer</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_DEFAULT'></a>PYBIND11_OBJECT_DEFAULT</b><font face='Lucida Console'>(</font>buffer, object, PyObject_CheckBuffer<font face='Lucida Console'>)</font>

    buffer_info <b><a name='request'></a>request</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>bool</u></font> writable <font color='#5555FF'>=</font> <font color='#979000'>false</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
        <font color='#0000FF'><u>int</u></font> flags <font color='#5555FF'>=</font> PyBUF_STRIDES <font color='#5555FF'>|</font> PyBUF_FORMAT;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>writable<font face='Lucida Console'>)</font> <b>{</b>
            flags <font color='#5555FF'>|</font><font color='#5555FF'>=</font> PyBUF_WRITABLE;
        <b>}</b>
        <font color='#0000FF'>auto</font> <font color='#5555FF'>*</font>view <font color='#5555FF'>=</font> <font color='#0000FF'>new</font> <font color='#BB00BB'>Py_buffer</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#BB00BB'>PyObject_GetBuffer</font><font face='Lucida Console'>(</font>m_ptr, view, flags<font face='Lucida Console'>)</font> <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#0000FF'>delete</font> view;
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>buffer_info</font><font face='Lucida Console'>(</font>view<font face='Lucida Console'>)</font>;
    <b>}</b>
<b>}</b>;

<font color='#0000FF'>class</font> <b><a name='memoryview'></a>memoryview</b> : <font color='#0000FF'>public</font> object <b>{</b>
<font color='#0000FF'>public</font>:
    <b><a name='PYBIND11_OBJECT_CVT'></a>PYBIND11_OBJECT_CVT</b><font face='Lucida Console'>(</font>memoryview, object, PyMemoryView_Check, PyMemoryView_FromObject<font face='Lucida Console'>)</font>

    <font color='#009900'>/** \rst
        Creates ``memoryview`` from ``buffer_info``.

        ``buffer_info`` must be created from ``buffer::request()``. Otherwise
        throws an exception.

        For creating a ``memoryview`` from objects that support buffer protocol,
        use ``memoryview(const object&amp; obj)`` instead of this constructor.
     \endrst */</font>
    <font color='#0000FF'>explicit</font> <b><a name='memoryview'></a>memoryview</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> buffer_info <font color='#5555FF'>&amp;</font>info<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>info.<font color='#BB00BB'>view</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Prohibited to create memoryview without Py_buffer</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#009900'>// Note: PyMemoryView_FromBuffer never increments obj reference.
</font>        m_ptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>info.<font color='#BB00BB'>view</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>obj<font face='Lucida Console'>)</font> ? <font color='#BB00BB'>PyMemoryView_FromObject</font><font face='Lucida Console'>(</font>info.<font color='#BB00BB'>view</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>obj<font face='Lucida Console'>)</font>
                                   : <font color='#BB00BB'>PyMemoryView_FromBuffer</font><font face='Lucida Console'>(</font>info.<font color='#BB00BB'>view</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>m_ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Unable to create memoryview from buffer descriptor</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
    <b>}</b>

    <font color='#009900'>/** \rst
        Creates ``memoryview`` from static buffer.

        This method is meant for providing a ``memoryview`` for C/C++ buffer not
        managed by Python. The caller is responsible for managing the lifetime
        of ``ptr`` and ``format``, which MUST outlive the memoryview constructed
        here.

        See also: Python C API documentation for `PyMemoryView_FromBuffer`_.

        .. _PyMemoryView_FromBuffer:
           https://docs.python.org/c-api/memoryview.html#c.PyMemoryView_FromBuffer

        :param ptr: Pointer to the buffer.
        :param itemsize: Byte size of an element.
        :param format: Pointer to the null-terminated format string. For
            homogeneous Buffers, this should be set to
            ``format_descriptor&lt;T&gt;::value``.
        :param shape: Shape of the tensor (1 entry per dimension).
        :param strides: Number of bytes between adjacent entries (for each
            per dimension).
        :param readonly: Flag to indicate if the underlying storage may be
            written to.
     \endrst */</font>
    <font color='#0000FF'>static</font> memoryview <b><a name='from_buffer'></a>from_buffer</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>ptr,
                                  ssize_t itemsize,
                                  <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>format,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> shape,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> strides,
                                  <font color='#0000FF'><u>bool</u></font> readonly <font color='#5555FF'>=</font> <font color='#979000'>false</font><font face='Lucida Console'>)</font>;

    <font color='#0000FF'>static</font> memoryview <b><a name='from_buffer'></a>from_buffer</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>ptr,
                                  ssize_t itemsize,
                                  <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>format,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> shape,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> strides<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> memoryview::<font color='#BB00BB'>from_buffer</font><font face='Lucida Console'>(</font>
            <font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>ptr<font face='Lucida Console'>)</font>, itemsize, format, std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>shape<font face='Lucida Console'>)</font>, std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>strides<font face='Lucida Console'>)</font>, <font color='#979000'>true</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> memoryview <b><a name='from_buffer'></a>from_buffer</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>*</font>ptr,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> shape,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> strides,
                                  <font color='#0000FF'><u>bool</u></font> readonly <font color='#5555FF'>=</font> <font color='#979000'>false</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> memoryview::<font color='#BB00BB'>from_buffer</font><font face='Lucida Console'>(</font><font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>ptr<font face='Lucida Console'>)</font>,
                                       <font color='#0000FF'>sizeof</font><font face='Lucida Console'>(</font>T<font face='Lucida Console'>)</font>,
                                       format_descriptor<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font>::value,
                                       std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>shape<font face='Lucida Console'>)</font>,
                                       std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>strides<font face='Lucida Console'>)</font>,
                                       readonly<font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
    <font color='#0000FF'>static</font> memoryview <b><a name='from_buffer'></a>from_buffer</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> T <font color='#5555FF'>*</font>ptr,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> shape,
                                  detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> strides<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> memoryview::<font color='#BB00BB'>from_buffer</font><font face='Lucida Console'>(</font>
            <font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font>T <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>ptr<font face='Lucida Console'>)</font>, std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>shape<font face='Lucida Console'>)</font>, std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>strides<font face='Lucida Console'>)</font>, <font color='#979000'>true</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#009900'>/** \rst
        Creates ``memoryview`` from static memory.

        This method is meant for providing a ``memoryview`` for C/C++ buffer not
        managed by Python. The caller is responsible for managing the lifetime
        of ``mem``, which MUST outlive the memoryview constructed here.

        See also: Python C API documentation for `PyMemoryView_FromBuffer`_.

        .. _PyMemoryView_FromMemory:
           https://docs.python.org/c-api/memoryview.html#c.PyMemoryView_FromMemory
     \endrst */</font>
    <font color='#0000FF'>static</font> memoryview <b><a name='from_memory'></a>from_memory</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>mem, ssize_t size, <font color='#0000FF'><u>bool</u></font> readonly <font color='#5555FF'>=</font> <font color='#979000'>false</font><font face='Lucida Console'>)</font> <b>{</b>
        PyObject <font color='#5555FF'>*</font>ptr <font color='#5555FF'>=</font> <font color='#BB00BB'>PyMemoryView_FromMemory</font><font face='Lucida Console'>(</font>
            <font color='#0000FF'>reinterpret_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>mem<font face='Lucida Console'>)</font>, size, <font face='Lucida Console'>(</font>readonly<font face='Lucida Console'>)</font> ? PyBUF_READ : PyBUF_WRITE<font face='Lucida Console'>)</font>;
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>ptr<font face='Lucida Console'>)</font> <b>{</b>
            <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>Could not allocate memoryview object!</font>"<font face='Lucida Console'>)</font>;
        <b>}</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>memoryview</font><font face='Lucida Console'>(</font><font color='#BB00BB'>object</font><font face='Lucida Console'>(</font>ptr, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <b>}</b>

    <font color='#0000FF'>static</font> memoryview <b><a name='from_memory'></a>from_memory</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>mem, ssize_t size<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> memoryview::<font color='#BB00BB'>from_memory</font><font face='Lucida Console'>(</font><font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>mem<font face='Lucida Console'>)</font>, size, <font color='#979000'>true</font><font face='Lucida Console'>)</font>;
    <b>}</b>

<font color='#0000FF'>#ifdef</font> PYBIND11_HAS_STRING_VIEW
    <font color='#0000FF'>static</font> memoryview <b><a name='from_memory'></a>from_memory</b><font face='Lucida Console'>(</font>std::string_view mem<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>return</font> <font color='#BB00BB'>from_memory</font><font face='Lucida Console'>(</font><font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>mem.<font color='#BB00BB'>data</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>mem.<font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>, <font color='#979000'>true</font><font face='Lucida Console'>)</font>;
    <b>}</b>
<font color='#0000FF'>#endif</font>
<b>}</b>;

<font color='#009900'>/// @cond DUPLICATE
</font><font color='#0000FF'>inline</font> memoryview memoryview::<b><a name='from_buffer'></a>from_buffer</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font> <font color='#5555FF'>*</font>ptr,
                                          ssize_t itemsize,
                                          <font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>format,
                                          detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> shape,
                                          detail::any_container<font color='#5555FF'>&lt;</font>ssize_t<font color='#5555FF'>&gt;</font> strides,
                                          <font color='#0000FF'><u>bool</u></font> readonly<font face='Lucida Console'>)</font> <b>{</b>
    <font color='#0000FF'><u>size_t</u></font> ndim <font color='#5555FF'>=</font> shape<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>ndim <font color='#5555FF'>!</font><font color='#5555FF'>=</font> strides<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>size</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#BB00BB'>pybind11_fail</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>memoryview: shape length doesn't match strides length</font>"<font face='Lucida Console'>)</font>;
    <b>}</b>
    ssize_t size <font color='#5555FF'>=</font> ndim <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>0</font>u ? <font color='#979000'>1</font> : <font color='#979000'>0</font>;
    <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font> i <font color='#5555FF'>=</font> <font color='#979000'>0</font>; i <font color='#5555FF'>&lt;</font> ndim; <font color='#5555FF'>+</font><font color='#5555FF'>+</font>i<font face='Lucida Console'>)</font> <b>{</b>
        size <font color='#5555FF'>*</font><font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#5555FF'>*</font>shape<font face='Lucida Console'>)</font>[i];
    <b>}</b>
    Py_buffer view;
    view.buf <font color='#5555FF'>=</font> ptr;
    view.obj <font color='#5555FF'>=</font> nullptr;
    view.len <font color='#5555FF'>=</font> size <font color='#5555FF'>*</font> itemsize;
    view.readonly <font color='#5555FF'>=</font> <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>readonly<font face='Lucida Console'>)</font>;
    view.itemsize <font color='#5555FF'>=</font> itemsize;
    view.format <font color='#5555FF'>=</font> <font color='#0000FF'>const_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>format<font face='Lucida Console'>)</font>;
    view.ndim <font color='#5555FF'>=</font> <font color='#0000FF'>static_cast</font><font color='#5555FF'>&lt;</font><font color='#0000FF'><u>int</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>ndim<font face='Lucida Console'>)</font>;
    view.shape <font color='#5555FF'>=</font> shape<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>data</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    view.strides <font color='#5555FF'>=</font> strides<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font><font color='#BB00BB'>data</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    view.suboffsets <font color='#5555FF'>=</font> nullptr;
    view.internal <font color='#5555FF'>=</font> nullptr;
    PyObject <font color='#5555FF'>*</font>obj <font color='#5555FF'>=</font> <font color='#BB00BB'>PyMemoryView_FromBuffer</font><font face='Lucida Console'>(</font><font color='#5555FF'>&amp;</font>view<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>obj<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>memoryview</font><font face='Lucida Console'>(</font><font color='#BB00BB'>object</font><font face='Lucida Console'>(</font>obj, stolen_t<b>{</b><b>}</b><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
<b>}</b>
<font color='#009900'>/// @endcond
</font><font color='#009900'>/// @} pytypes
</font>
<font color='#009900'>/// \addtogroup python_builtins
</font><font color='#009900'>/// @{
</font>
<font color='#009900'>/// Get the length of a Python object.
</font><font color='#0000FF'>inline</font> <font color='#0000FF'><u>size_t</u></font> <b><a name='len'></a>len</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b>
    ssize_t result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_Length</font><font face='Lucida Console'>(</font>h.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>result <font color='#5555FF'>&lt;</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font><font face='Lucida Console'>)</font> result;
<b>}</b>

<font color='#009900'>/// Get the length hint of a Python object.
</font><font color='#009900'>/// Returns 0 when this cannot be determined.
</font><font color='#0000FF'>inline</font> <font color='#0000FF'><u>size_t</u></font> <b><a name='len_hint'></a>len_hint</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b>
    ssize_t result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_LengthHint</font><font face='Lucida Console'>(</font>h.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, <font color='#979000'>0</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>result <font color='#5555FF'>&lt;</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#009900'>// Sometimes a length can't be determined at all (eg generators)
</font>        <font color='#009900'>// In which case simply return 0
</font>        <font color='#BB00BB'>PyErr_Clear</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
        <font color='#0000FF'>return</font> <font color='#979000'>0</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>size_t</u></font><font face='Lucida Console'>)</font> result;
<b>}</b>

<font color='#0000FF'>inline</font> str <b><a name='repr'></a>repr</b><font face='Lucida Console'>(</font>handle h<font face='Lucida Console'>)</font> <b>{</b>
    PyObject <font color='#5555FF'>*</font>str_value <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_Repr</font><font face='Lucida Console'>(</font>h.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>str_value<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>str<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>str_value<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>inline</font> iterator <b><a name='iter'></a>iter</b><font face='Lucida Console'>(</font>handle obj<font face='Lucida Console'>)</font> <b>{</b>
    PyObject <font color='#5555FF'>*</font>result <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_GetIter</font><font face='Lucida Console'>(</font>obj.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result<font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> reinterpret_steal<font color='#5555FF'>&lt;</font>iterator<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>result<font face='Lucida Console'>)</font>;
<b>}</b>
<font color='#009900'>/// @} python_builtins
</font>
<b><a name='PYBIND11_NAMESPACE_BEGIN'></a>PYBIND11_NAMESPACE_BEGIN</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
iterator object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='begin'></a>begin</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>iter</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
iterator object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='end'></a>end</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> iterator::<font color='#BB00BB'>sentinel</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
item_accessor object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>handle key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, reinterpret_borrow<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font><b>}</b>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
item_accessor object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font><b>}</b>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
item_accessor object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='operator'></a>operator</b>[]<font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, pybind11::<font color='#BB00BB'>str</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font><b>}</b>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
obj_attr_accessor object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='attr'></a>attr</b><font face='Lucida Console'>(</font>handle key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, reinterpret_borrow<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font><b>}</b>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
obj_attr_accessor object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='attr'></a>attr</b><font face='Lucida Console'>(</font>object <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, std::<font color='#BB00BB'>move</font><font face='Lucida Console'>(</font>key<font face='Lucida Console'>)</font><b>}</b>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
str_attr_accessor object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='attr'></a>attr</b><font face='Lucida Console'>(</font><font color='#0000FF'>const</font> <font color='#0000FF'><u>char</u></font> <font color='#5555FF'>*</font>key<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <b>{</b><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, key<b>}</b>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
args_proxy object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>args_proxy</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
<b>}</b>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> T<font color='#5555FF'>&gt;</font>
<font color='#0000FF'><u>bool</u></font> object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='contains'></a>contains</b><font face='Lucida Console'>(</font>T <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>item<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>attr</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>__contains__</font>"<font face='Lucida Console'>)</font><font face='Lucida Console'>(</font>std::forward<font color='#5555FF'>&lt;</font>T<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font>item<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>.<font color='#0000FF'>template</font> cast<font color='#5555FF'>&lt;</font><font color='#0000FF'><u>bool</u></font><font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
pybind11::str object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='str'></a>str</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> pybind11::<font color='#BB00BB'>str</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
str_attr_accessor object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='doc'></a>doc</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> <font color='#BB00BB'>attr</font><font face='Lucida Console'>(</font>"<font color='#CC0000'>__doc__</font>"<font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
handle object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='get_type'></a>get_type</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'>return</font> type::<font color='#BB00BB'>handle_of</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
<b>}</b>

<font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>
<font color='#0000FF'><u>bool</u></font> object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='rich_compare'></a>rich_compare</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other, <font color='#0000FF'><u>int</u></font> value<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>
    <font color='#0000FF'><u>int</u></font> rv <font color='#5555FF'>=</font> <font color='#BB00BB'>PyObject_RichCompareBool</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, other.<font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, value<font face='Lucida Console'>)</font>;
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>rv <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font> <b>{</b>
        <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;
    <b>}</b>
    <font color='#0000FF'>return</font> rv <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>1</font>;
<b>}</b>

<font color='#0000FF'>#define</font> PYBIND11_MATH_OPERATOR_UNARY<font face='Lucida Console'>(</font>op, fn<font face='Lucida Console'>)</font>                                                      \
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>                                                                         \
    object object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='op'></a>op</b><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>                                                            \
        object result <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>fn</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                           \
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>                                                                        \
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;                                                            \
        <font color='#0000FF'>return</font> result;                                                                            \
    <b>}</b>

<font color='#0000FF'>#define</font> PYBIND11_MATH_OPERATOR_BINARY<font face='Lucida Console'>(</font>op, fn<font face='Lucida Console'>)</font>                                                     \
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>                                                                         \
    object object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='op'></a>op</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <font color='#0000FF'>const</font> <b>{</b>                                     \
        object result <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>fn</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, other.<font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    \
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>                                                                        \
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;                                                            \
        <font color='#0000FF'>return</font> result;                                                                            \
    <b>}</b>

<font color='#0000FF'>#define</font> PYBIND11_MATH_OPERATOR_BINARY_INPLACE<font face='Lucida Console'>(</font>iop, fn<font face='Lucida Console'>)</font>                                            \
    <font color='#0000FF'>template</font> <font color='#5555FF'>&lt;</font><font color='#0000FF'>typename</font> D<font color='#5555FF'>&gt;</font>                                                                         \
    object object_api<font color='#5555FF'>&lt;</font>D<font color='#5555FF'>&gt;</font>::<b><a name='iop'></a>iop</b><font face='Lucida Console'>(</font>object_api <font color='#0000FF'>const</font> <font color='#5555FF'>&amp;</font>other<font face='Lucida Console'>)</font> <b>{</b>                                          \
        object result <font color='#5555FF'>=</font> reinterpret_steal<font color='#5555FF'>&lt;</font>object<font color='#5555FF'>&gt;</font><font face='Lucida Console'>(</font><font color='#BB00BB'>fn</font><font face='Lucida Console'>(</font><font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>, other.<font color='#BB00BB'>derived</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    \
        <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font><font color='#5555FF'>!</font>result.<font color='#BB00BB'>ptr</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>                                                                        \
            <font color='#0000FF'>throw</font> <font color='#BB00BB'>error_already_set</font><font face='Lucida Console'>(</font><font face='Lucida Console'>)</font>;                                                            \
        <font color='#0000FF'>return</font> result;                                                                            \
    <b>}</b>

<b><a name='PYBIND11_MATH_OPERATOR_UNARY'></a>PYBIND11_MATH_OPERATOR_UNARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b>~, PyNumber_Invert<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_UNARY'></a>PYBIND11_MATH_OPERATOR_UNARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>-</font>, PyNumber_Negative<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>+</font>, PyNumber_Add<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>+</font><font color='#5555FF'>=</font>, PyNumber_InPlaceAdd<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>-</font>, PyNumber_Subtract<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>-</font><font color='#5555FF'>=</font>, PyNumber_InPlaceSubtract<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>*</font>, PyNumber_Multiply<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>*</font><font color='#5555FF'>=</font>, PyNumber_InPlaceMultiply<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>/</font>, PyNumber_TrueDivide<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>/</font><font color='#5555FF'>=</font>, PyNumber_InPlaceTrueDivide<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>|</font>, PyNumber_Or<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>|</font><font color='#5555FF'>=</font>, PyNumber_InPlaceOr<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&amp;</font>, PyNumber_And<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&amp;</font><font color='#5555FF'>=</font>, PyNumber_InPlaceAnd<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b>^, PyNumber_Xor<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b>^<font color='#5555FF'>=</font>, PyNumber_InPlaceXor<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font>, PyNumber_Lshift<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font>, PyNumber_InPlaceLshift<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY'></a>PYBIND11_MATH_OPERATOR_BINARY</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font>, PyNumber_Rshift<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_MATH_OPERATOR_BINARY_INPLACE'></a>PYBIND11_MATH_OPERATOR_BINARY_INPLACE</b><font face='Lucida Console'>(</font><b><a name='operator'></a>operator</b><font color='#5555FF'>&gt;</font><font color='#5555FF'>&gt;</font><font color='#5555FF'>=</font>, PyNumber_InPlaceRshift<font face='Lucida Console'>)</font>

<font color='#0000FF'>#undef</font> PYBIND11_MATH_OPERATOR_UNARY
<font color='#0000FF'>#undef</font> PYBIND11_MATH_OPERATOR_BINARY
<font color='#0000FF'>#undef</font> PYBIND11_MATH_OPERATOR_BINARY_INPLACE

<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>detail<font face='Lucida Console'>)</font>
<b><a name='PYBIND11_NAMESPACE_END'></a>PYBIND11_NAMESPACE_END</b><font face='Lucida Console'>(</font>PYBIND11_NAMESPACE<font face='Lucida Console'>)</font>

</pre></body></html>